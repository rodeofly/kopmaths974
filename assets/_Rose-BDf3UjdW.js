import{r,F as o,a as B,p as S,ah as D,ai as k,aa as d,k as f,aE as v,ad as w,cp as A,W as m,B as g,cq as R,at as N,I as $}from"./embellissements-BYV7mIDn.js";import{c as M}from"./outilsMathjs-4cmbq7B4.js";import"mathjs";import"decimal.js";import"katex";import"earcut";import"roughjs";class W{type;operation;typeDonnees;nombreDeValeurs;cellulesPreremplies;rayon;resultats;valeurMax;indexInconnue;values;rayonBoite;constructor({values:e=[],nombreDeValeurs:s=3,rayon:l=2,operation:t="addition",type:u="résultats",typeDonnees:h="entiers",cellulesPreremplies:i=Array.from("abcdefghi"),valeurMax:c=10,indexInconnue:b=999}){if(this.type=u,this.operation=t,this.typeDonnees=h,this.nombreDeValeurs=s,this.cellulesPreremplies=i,this.rayon=l,this.resultats=[],this.valeurMax=c,this.indexInconnue=b,e===void 0||e.length===0){for(e=[];this.valeurMax-2<this.nombreDeValeurs;)this.valeurMax++;const n=r(2,this.valeurMax);for(let p=0;p<this.nombreDeValeurs;p++)switch(this.typeDonnees){case"entiers":e.push(r(2,this.valeurMax,e.map(Number))),this.rayon=2;break;case"entiers relatifs":e.push(r(-this.valeurMax,this.valeurMax,[0,1,...e.map(Number)])),this.rayon=2;break;case"litteraux":{const a=M(`${r(1,this.valeurMax)}x + ${r(1,this.valeurMax)}`,null).printResult;e.push(a),this.rayon=3}break;case"fractions dénominateurs multiples":e.push(new o(r(1,this.valeurMax),n).simplifie()),this.rayon=2.5;break;case"fractions positives dénominateurs premiers":e.push(new o(r(1,this.valeurMax),B([2,3,5,7])).simplifie()),this.rayon=2.5;break;case"fractions positives":e.push(new o(r(1,this.valeurMax),r(2,this.valeurMax)).simplifie()),this.rayon=2.5;break;case"fractions relatives":e.push(new o(r(-this.valeurMax,this.valeurMax,0),r(2,this.valeurMax)).simplifie()),this.rayon=2.5;break}}else for(let n=e.length;n<this.nombreDeValeurs;n++)switch(this.typeDonnees){case"entiers":e.push(r(2,this.valeurMax,e.map(Number)));break;case"entiers relatifs":e.push(r(-this.valeurMax,this.valeurMax,[0,1,...e.map(Number)]));break;case"litteraux":{const p=M(`${r(1,this.valeurMax)}x + ${r(1,this.valeurMax)}`,null).printResult;e.push(p)}break;case"fractions dénominateurs multiples":e.push(new o(r(1,this.valeurMax),e[n-1].d).simplifie());break;case"fractions positives dénominateurs premiers":e.push(new o(r(1,this.valeurMax),B([2,3,5,7])).simplifie());break;case"fractions positives":e.push(new o(r(1,this.valeurMax),r(2,this.valeurMax)).simplifie());break;case"fractions relatives":e.push(new o(r(-this.valeurMax,this.valeurMax,0),r(2,this.valeurMax)).simplifie());break}this.values=e,this.calculeResultats()}calculeResultats(){for(let e=0;e<this.nombreDeValeurs;e++){const s=this.values[e]instanceof o?this.values[e].texFraction.replace("dfrac","frac"):typeof this.values[e]=="number"?String(this.values[e]):String(this.values[e]),l=this.values[(e+1)%this.nombreDeValeurs]instanceof o?this.values[(e+1)%this.nombreDeValeurs].texFraction.replace("dfrac","frac"):typeof this.values[(e+1)%this.nombreDeValeurs]=="number"?String(this.values[(e+1)%this.nombreDeValeurs]):String(this.values[(e+1)%this.nombreDeValeurs]);this.resultats[e]=this.operate(s,l)}}operate(e,s){switch(this.operation){case"addition":if(this.typeDonnees!=="litteraux")if(this.typeDonnees.substring(0,4)==="frac"){const l=e.match(/\{(\d+)\}\{(\d+)\}/);let t,u;l?(t=Number(l[1]),u=Number(l[2])):(t=Number(e),u=1);const h=s.match(/\{(\d+)\}\{(\d+)\}/);let i,c;h?(i=Number(h[1]),c=Number(h[2])):(i=Number(s),c=1);const b=new o(t,u),n=new o(i,c);return b.sommeFraction(n).texFraction}else{const l=Number(e.replace(",",".").replace("{.}",".")),t=Number(s.replace(",",".").replace("{.}","."));return String(l+t)}else return M(`${String(e).replace("\\times","*")}+${String(s).replace("\\times","*")}`,null).printResult;case"multiplication":default:if(this.typeDonnees!=="litteraux")if(this.typeDonnees.substring(0,4)==="frac"){const l=e.match(/\{(\d+)\}\{(\d+)\}/);let t,u;l?(t=Number(l[1]),u=Number(l[2])):(t=Number(e),u=1);const h=s.match(/\{(\d+)\}\{(\d+)\}/);let i,c;h?(i=Number(h[1]),c=Number(h[2])):(i=Number(s),c=1);const b=new o(t,u),n=new o(i,c);return b.produitFraction(n).texFraction}else{const l=Number(e.replace(",",".").replace("{.}",".")),t=Number(s.replace(",",".").replace("{.}","."));return String(l*t)}else return M(`(${String(e).replace("\\times","*")}) * (${String(s).replace("\\times","*")})`,null).printResult}}representation(){this.type==="résultats"?this.rayonBoite=1:this.typeDonnees.substring(0,4)==="frac"?this.rayonBoite=1.5:this.typeDonnees==="litteraux"?this.operation==="multiplication"?this.rayonBoite=3.2:this.rayonBoite=2.5:this.rayonBoite=1;const e=[],s=S(0,0,"",""),l=D(S(this.rayon,0,"",""),s,180/this.nombreDeValeurs-90,"A");for(let t=0,u,h;t<this.nombreDeValeurs;t++){const i=D(l,s,360*t/this.nombreDeValeurs,"M");i.positionLabel="center";const c=k(i,s,180/this.nombreDeValeurs,1.2,"B"),b=k(i,s,-180/this.nombreDeValeurs,1.2,"D"),n=d(i,s,1.5,"C"),p=D(n,s,360/this.nombreDeValeurs,"N"),a=k(i,s,180/this.nombreDeValeurs,2.5,"P"),F=f(s,c,"black"),P=f(c,n,"black"),I=f(n,b,"black"),V=d(n,s,.6),x=d(f(n,a),n,(v(n,a)-this.rayonBoite)/v(n,a));x.styleExtremites="->",x.tailleExtremites=5,x.pointilles=2;const y=d(f(p,a),p,(v(p,a)-this.rayonBoite)/v(p,a));y.styleExtremites="->",y.tailleExtremites=5,y.pointilles=2,this.type==="can1"?u=w():u=w(),e.push(u),e.push(F,P,I,x,y),h=D(A(a,this.rayonBoite,this.nombreDeValeurs),a,360/this.nombreDeValeurs-90),(this.type==="résultats"||this.type==="solutions"||this.type==="can1"||this.type==="can2")&&(this.type==="can1"&&(this.indexInconnue===t||t===(this.indexInconnue-1)%this.nombreDeValeurs||t===(this.indexInconnue+1)%this.nombreDeValeurs)||this.type==="can2"&&(this.indexInconnue===t||t===(this.indexInconnue+1)%this.nombreDeValeurs)||(this.typeDonnees!=="litteraux"&&this.typeDonnees.substring(0,4)!=="frac"?e.push(m(String(this.values[t]),i,0,"black",1,"milieu",!0)):this.typeDonnees!=="litteraux"?this.values[t]instanceof o?e.push(g(this.values[t].texFSD,i.x,i.y,"black",0,0,"none",8)):e.push(m(String(this.values[t]),i,0,"black",1,"milieu",!0)):e.push(R(String(this.values[t]),V.x,V.y,"black",50,12,"none",8,{anchor:"center"}))),this.type==="can1"&&this.indexInconnue===t&&e.push(m(N(t+1),i))),this.type==="solutions"||this.type==="valeurs"||this.type==="can1"||this.type==="can2"?(this.type==="can2"&&this.indexInconnue===t||(this.typeDonnees!=="litteraux"&&this.typeDonnees.substring(0,4)!=="frac"?e.push(m(this.resultats[t],a,0,"black",1,"milieu",!0)):this.resultats[t]instanceof o?e.push(g(this.resultats[t].texFSD,a.x,a.y,"black",0,0,"none",8)):e.push(g(String(this.resultats[t]),a.x,a.y,"black",0,0,"none",8))),this.type==="can2"&&this.indexInconnue===t?e.push(m(N(t+1),a)):(h.color=$("black"),this.type==="valeurs"&&e.push(m(N(t+1),i)))):this.cellulesPreremplies[t]instanceof o?e.push(m(this.cellulesPreremplies[t].texFSD,a,0,"black",1,"milieu",!0)):e.push(m(String(this.cellulesPreremplies[t]),a,0,"black",1,"milieu",!0)),e.push(h)}return e}}export{W as Rose};

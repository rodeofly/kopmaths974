import{O as J,p as x,A as K,k as P,B as M,C as v,D as F,P as R,E as w,G as H}from"./embellissements-BYV7mIDn.js";import"decimal.js";import"mathjs";import"roughjs";import{A as $}from"./AjouteTableauMathlive-Bz24QHd3.js";import"./index-BUDQz6-w.js";/* empty css                   */function B(l,e,t,c=1){const b=new R(l.x,l.y+c),d=x(e.x,e.y+c),a=w(l,b,d),n=P(d,e);n.styleExtremites="->";const i=H(b,d),f=[a,n];let y;if(t){const p=t.color??"black";if(t.latex)y=M(t.texte,i.x,i.y+(c>0?.5:-.8),p,50,20,"",10);else{const r=t.math??!1;y=v(t.texte,i.x,i.y+(c>0?.5:-.8),0,p,1,"gauche",r),y.gras=t.gras??!1}f.push(y)}return f}function E(l,e,t,c=1,b=!1){b&&(c=-c);const d=x(l.x+c,l.y),a=x(e.x+c,e.y),n=w(l,d,a),i=P(a,e);i.styleExtremites="->";const f=H(d,a),y=[n,i];let p;const r=t.color??"black",u=t.math??!1;return t&&(t.latex?p=M(t.texte,f.x+t.texte.length/10+c/2,f.y,r,50,20,"",10):(p=v(t.texte,f.x+c,f.y-.6,0,r,1,b?"droite":"gauche",u),p.gras=t.gras??!1),y.push(p)),y}class S extends J{constructor({largeurTitre:e=7,largeur:t=3,hauteur:c=2,nbColonnes:b=3,origine:d=x(0,0),ligne1:a,ligne2:n,flecheHaut:i=[],flecheBas:f=[],flecheDroite:y=!1,flecheDroiteSens:p="bas",flecheGauche:r=!1,flecheGaucheSens:u="haut"}){super(),a&&n&&Array.isArray(a)&&Array.isArray(n)&&(b=Math.max(a.length,n.length,b));const s=d,k=x(s.x+e+t*(b-1),s.y),D=x(k.x,k.y+2*c),O=x(s.x,s.y+2*c);this.objets=[],this.objets.push(K(s,k,D,O)),this.objets.push(P(x(s.x,s.y+c),x(k.x,k.y+c)));let A=s.x+e;for(let o=0;o<b;o++){if(this.objets.push(P(x(A,s.y),x(A,D.y))),a[o+1])if(a[o+1].latex)this.objets.push(M(a[o+1].texte??"",A+t/2,s.y+1.4*c,a[o+1].color||"black",t*8,20,"",10));else{const m=a[o+1].color??"black",h=a[o+1].math??!1,j=v(a[o+1].texte??"",A+t/2,s.y+1.4*c,0,m,1.2,"milieu",h);j.gras=a[o+1].gras??!1,this.objets.push(j)}if(n[o+1])if(n[o+1].latex)this.objets.push(M(n[o+1].texte??"",A+t/2,s.y+.4*c,n[o+1].color||"black",t*8,20,"",10));else{const m=n[o+1].color??"black",h=n[o+1].math??!1,j=v(n[o+1].texte??"",A+t/2,s.y+.4*c,0,m,1.2,"milieu",h);j.gras=n[o+1].gras??!1,this.objets.push(j)}A+=t}if(a[0])if(a[0].latex)this.objets.push(M(a[0].texte??"",s.x+e/2,s.y+1.4*c,"black",t*8,20,"",10));else{const o=a[0].color??"black",m=a[0].math??!1,h=v(a[0].texte??"",s.x+e/2,s.y+1.4*c,0,o,1.2,"milieu",m);h.gras=a[0].gras??!1,this.objets.push(h)}if(n[0])if(n[0].latex)this.objets.push(M(n[0].texte??"",s.x+e/2,s.y+.4*c,"black",t*8,20,"",10));else{const o=n[0].color??"black",m=n[0].math??!1,h=v(n[0].texte??"",s.x+e/2,s.y+.4*c,0,o,1.2,"milieu",m);h.gras=n[0].gras??!1,this.objets.push(h)}for(const o of i){const m=x(s.x+e+o[0]*t-.4*t,s.y+2.1*c),h=x(s.x+e+o[1]*t-.6*t,s.y+2.1*c);o[3]?this.objets.push(...B(m,h,o[2],o[3])):this.objets.push(...B(m,h,o[2]))}for(const o of f){const m=x(s.x+e+o[0]*t-.4*t,s.y-.1*c),h=x(s.x+e+o[1]*t-.6*t,s.y-.1*c);let j;o[3]?j=-Math.abs(o[3]):j=-1,this.objets.push(...B(m,h,o[2],j))}if(y&&typeof y=="string"){const o=x(s.x+e+(b-1)*t+.2,s.y+1.5*c),m=x(s.x+e+(b-1)*t+.2,s.y+.5*c);p==="bas"?this.objets.push(...E(o,m,y)):this.objets.push(...E(m,o,y));const{xmin:h,ymin:j,xmax:q,ymax:z}=F(this.objets,{rxmin:0,rxmax:0,rymin:0,rymax:0});this.bordures=[h,j,q,z]}if(r&&typeof r=="string"){const o=x(s.x,s.y+1.5*c),m=x(s.x,s.y+.5*c);u==="bas"?this.objets.push(...E(o,m,r,1,!0)):this.objets.push(...E(m,o,r,1,!0))}const{xmin:I,ymin:N,xmax:Q,ymax:V}=F(this.objets,{rxmin:0,rxmax:0,rymin:0,rymax:0});return this.bordures=[I,N,Q,V],this}}function C(l){return new S(l)}function T(l,e,t,c=1,b=!0,d=0,a=0,n=!1,i={}){return l.length>0?l.length:t.length/e.length+1,e.length>0?e.length:t.length/l.length+1,$.create(d,a,$.convertTclToTableauMathlive(l,e,t),`tableauMathlive ${i.classes?i.classes:""}`,n,i).output}function L({L0C0:l,L0C1:e,L1C0:t,L1C1:c},b,d,a,n){let i;{const f=document.createElement("table");f.className="tableau2x2",f.id=`tableau2x2Ex${b}Q${d}`;const y=document.createElement("tr"),p=document.createElement("tr");f.appendChild(y),f.appendChild(p);const r=document.createElement("td"),u=document.createElement("td"),s=document.createElement("td"),k=document.createElement("td");y.appendChild(r),y.appendChild(u),p.appendChild(s),p.appendChild(k),r.textContent=l.content??"",u.textContent=e.content??"",s.textContent=t.content??"",k.textContent=c.content??"",l.background!=null&&(r.style.backgroundColor=l.background),e.background!=null&&(u.style.backgroundColor=e.background),t.background!=null&&(s.style.backgroundColor=t.background),c.background!=null&&(k.style.backgroundColor=c.background),l.color!=null&&(r.style.color=l.color),e.color!=null&&(u.style.color=e.color),t.color!=null&&(s.style.color=t.color),c.color!=null&&(k.style.color=c.color),i=f.outerHTML}return i}export{S as T,C as a,L as b,T as t};

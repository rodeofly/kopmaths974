class w{x;y;walkable;gCost;hCost;parent;constructor(e,a,h=!0){this.x=e,this.y=a,this.walkable=h,this.gCost=1/0,this.hCost=0,this.parent=null}get fCost(){return this.gCost+this.hCost}}function b(o,e){const a=Math.abs(o.x-e.x),h=Math.abs(o.y-e.y);return 14*Math.min(a,h)+10*Math.abs(a-h)}function d(o,e,a,h=new Set){const r=[o],i=new Set;for(o.gCost=0;r.length>0;){r.sort((t,n)=>t.fCost-n.fCost);let s=r.shift();if(!s)break;if(i.add(s),s===e){const t=[];for(;s!==o&&(t.push(s),s.parent);)s=s.parent;return t}for(const t of x(s,a)){if(!t.walkable||i.has(t)||h.has(t))continue;const n=s.gCost+b(s,t);(n<t.gCost||!r.includes(t))&&(t.gCost=n,t.hCost=b(t,e),t.parent=s,r.includes(t)||r.push(t))}}return null}function x(o,e){const a=[],{x:h,y:r}=o,i=[[0,1],[1,0],[0,-1],[-1,0]];for(const[s,t]of i){const n=h+s,c=r+t;e[c]&&e[c][n]&&e[c][n].walkable&&a.push(e[c][n])}return a}function y(o,e,a){const h=[];for(let r=0;r<o;r++){const i=[];for(let s=0;s<e;s++){const t=Math.random()>a&&s+1!==e;i.push(new w(s,r,t))}h.push(i)}return h}function k(o,e,a,h,r,i){const s=o*e>25?.2:0,t=y(o,e,s),n=t[a][h],c=t[r][i];n.walkable=!0,c.walkable=!0;const l=[],f=new Set,u=d(n,c,t,f);u&&(l.push([n,...u.slice().reverse()]),f.add(u[Math.floor(u.length*.5)]));const p=d(n,c,t,f);p&&(l.push([n,...p.slice().reverse()]),l[l.length-1].slice(Math.floor(p.length*.4),Math.floor(p.length*.6)).forEach(C=>f.add(C)));const g=d(n,c,t,f);return g&&l.push([n,...g.slice().reverse()]),l}export{k as r};

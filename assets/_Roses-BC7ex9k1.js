import{am as h,r as f,at as c,o as p,D as m,s as d,l as b}from"./embellissements-BYV7mIDn.js";import{a as x,r as y}from"./questionMathLive-DdRvWqlN.js";import{E as D,K as u}from"./Exercice-DtXhjCyI.js";import{Rose as v}from"./_Rose-BDf3UjdW.js";import{e as l}from"./comparisonFunctions-B45ZZ3C7.js";import"mathjs";import"decimal.js";import"katex";import"earcut";import"roughjs";import"./tableauMathlive-xx-nDjq0.js";import"./index-BUDQz6-w.js";import"./canStore-DaSrd7sp.js";import"./generalStore-C3E9FHtR.js";import"seedrandom";import"./ListeDeroulanteElement-CXmzV-cr.js";import"./sizeTools-DfTC1Dgv.js";import"./time-DMC-jnVL.js";import"./exerciseMethods-CtbYPwln.js";import"crypto-js";import"./gestionInteractif-DujZpSu8.js";import"./Hms-u2AUyU1C.js";import"./AjouteTableauMathlive-Bz24QHd3.js";import"./outilsMathjs-4cmbq7B4.js";import"./compute-engine.min.umd-BwAhpA7x.js";const U=!0,W="custom",X=!0,Y="AMCOpen";class Z extends D{operation;type;typeDonnees;nombreDeValeurs;valeurMax;roses;clavier;indexInconnue;constructor(){super(),this.besoinFormulaireNumerique=["Valeur maximale (entre 10 et 30) des facteurs",30],this.besoinFormulaire2Numerique=["Nombre de facteur entre 3 et 9 (limit√© √† 5 pour les valeurs fractionnaires ou litt√©rales)",9],this.besoinFormulaire3Numerique=["Type de questions",4,`1 : Calculer les produits
2 : Calculer les facteurs
3 : Course aux nombres 1
4 : Course aux nombres 2`],this.spacing=2,this.nbQuestions=1,this.sup=10,this.sup2=4,this.sup3=1,this.operation="multiplication",this.type="r√©sultats",this.typeDonnees="entiers",this.nombreDeValeurs=4,this.valeurMax=10,this.roses=[],this.clavier=u.clavierDeBase,this.indexInconnue=[]}nouvelleVersion(){switch(this.valeurMax=h(10,30,this.sup,10),this.nombreDeValeurs=h(3,9,this.sup2,5),this.sup3){case 1:this.type="r√©sultats",(this.typeDonnees.substring(0,4)==="frac"||this.typeDonnees==="litteraux")&&this.nombreDeValeurs>5&&(this.nombreDeValeurs=5);break;case 2:this.type="valeurs";break;case 3:(this.typeDonnees.substring(0,4)==="frac"||this.typeDonnees==="litteraux")&&this.nombreDeValeurs>5&&(this.nombreDeValeurs=5),this.type="can1";break;case 4:this.type="can2",(this.typeDonnees.substring(0,4)==="frac"||this.typeDonnees==="litteraux")&&this.nombreDeValeurs>5&&(this.nombreDeValeurs=5);break}this.typeDonnees==="litteraux"?this.clavier=u.clavierDeBaseAvecVariable:this.typeDonnees.includes("frac")?this.clavier=u.clavierDeBaseAvecFraction:this.clavier=u.clavierDeBase;for(let e=0,o,s,t,a,i=0;e<this.nbQuestions&&i<50;){switch(this.indexInconnue[e]=f(0,this.nombreDeValeurs-1),this.operation==="multiplication"?this.introduction="Les nombres situ√©s √† l'extr√©mit√© des fl√®ches sont les produits des nombres dont les fl√®ches sont issues.":this.introduction="Les nombres situ√©s √† l'extr√©mit√© des fl√®ches sont les sommes des nombres dont les fl√®ches sont issues.",this.type){case"r√©sultats":this.operation==="multiplication"?t="Calculer les produits √† l'extr√©mit√© des fl√®ches.<br>":t="Calculer les sommes √† l'extr√©mit√© des fl√®ches.<br>";break;case"valeurs":this.operation==="multiplication"?t="Retrouver les facteurs √† l'origine des fl√®ches.<br>":t="Retrouver les termes √† l'origine des fl√®ches.<br>";break;case"can1":this.typeDonnees.includes("entiers")?t=`Trouver le nombre de la case ${c(this.indexInconnue[e]+1)}.<br>`:t=`Trouver l'expression de la case ${c(this.indexInconnue[e]+1)}.<br>`;break;case"can2":default:this.typeDonnees.includes("entiers")?t=`Trouver le nombre de la case ${c(this.indexInconnue[e]+1)}.<br>`:t=`Trouver l'expression de la case ${c(this.indexInconnue[e]+1)}.<br>`;break}if(this.roses[e]=new v({nombreDeValeurs:this.nombreDeValeurs,type:this.type,operation:this.operation,valeurMax:this.valeurMax,typeDonnees:this.typeDonnees,indexInconnue:this.indexInconnue[e]}),o=this.roses[e].representation(),this.roses[e].type="solutions",s=this.roses[e].representation(),t+=p(Object.assign({scale:.6},m(o)),o),this.interactif)if(this.type.substring(0,3)==="can")t+=x(this,e,"   "+this.clavier,{texteAvant:`${c(this.indexInconnue[e]+1)}=`});else{let r="";for(let n=0;n<this.nombreDeValeurs;n++)r+=`${c(n+1)}=%{champ${n+1}}${d(3)}`;t+=y(this,e,r,this.clavier,"\\ldots")}a=p(Object.assign({scale:.6},m(s)),s),this.questionJamaisPosee(e,...this.roses[e].values)&&(this.listeQuestions[e]=t,this.listeCorrections[e]=a,e++),i++}b(this)}correctionInteractive=e=>{const o=this.nombreDeValeurs,s=[],t=document.querySelector(`#resultatCheckEx${this.numeroExercice}Q${e}`),a=[];if(this.type.substring(0,3)==="can")s[0]=document.getElementById(`champTexteEx${this.numeroExercice}Q${e}`),s[0]!=null&&(a[0]=s[0].value.replace(",",".").replace(/\((\+?-?\d+)\)/,"$1"));else{const r=document.querySelector(`math-field#champTexteEx${this.numeroExercice}Q${e}`);for(let n=0;n<o;n++)s[n]=r.getPromptValue(`champ${n+1}`),a[n]=s[n].replace(",",".").replace(/\((\+?-?\d+)\)/,"$1")}let i;return this.saisieCoherente(a,o,e)?(t.innerHTML="üòé",i="OK"):(t.innerHTML="‚òπÔ∏è",i="KO"),i};saisieCoherente(e,o,s){let t=!0,a=e[0],i;if(this.type==="can2"){i=this.roses[s].typeDonnees.substring(0,4)==="frac"?this.roses[s].resultats[this.indexInconnue[s]].toLatex().replace("dfrac","frac"):this.roses[s].resultats[this.indexInconnue[s]].toString();const r=l.parse(i);return r===null?!1:r.isSame(l.parse(a))}else{if(this.type==="can1")return a=e[0],i=this.roses[s].typeDonnees.substring(0,4)==="frac"?this.roses[s].values[this.indexInconnue[s]].toLatex().replace("dfrac","frac"):this.roses[s].values[this.indexInconnue[s]].toString(),l.parse(a).isSame(l.parse(i));for(let r=0;r<o;r++){a=e[r],this.type==="r√©sultats"?i=this.roses[s].typeDonnees.substring(0,4)==="frac"?this.roses[s].resultats[r].replace("dfrac","frac"):String(this.roses[s].resultats[r]):(i=this.roses[s].typeDonnees.substring(0,4)==="frac"?this.roses[s].resultats[r].replace("dfrac","frac"):String(this.roses[s].resultats[r]),a=this.roses[s].typeDonnees.substring(0,4)==="frac"?`${e[r]}${this.roses[s].operation==="addition"?"+":"\\times "}${e[(r+1)%this.nombreDeValeurs]}`:this.roses[s].operate(e[r],e[(r+1)%this.nombreDeValeurs]));const n=l.parse(a.replace("dfrac","frac"));t=!!(t&&(n!=null&&n.isEqual(l.parse(i)??l.parse("NaN"))))}return t}}}export{X as amcReady,Y as amcType,Z as default,U as interactifReady,W as interactifType};

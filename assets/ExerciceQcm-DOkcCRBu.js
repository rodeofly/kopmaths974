import{p as x,q as $}from"./qcm-BQR8Ns0N.js";import{c as v}from"./lists-i1i4IA1M.js";import{c as C,t as m}from"./embellissements-BYV7mIDn.js";import{E as Q}from"./Exercice-DtXhjCyI.js";import"mathjs";import"decimal.js";import"katex";import"earcut";import"roughjs";import"./exerciseMethods-CtbYPwln.js";import"./index-BUDQz6-w.js";import"crypto-js";import"seedrandom";const z=!0,F="qcm",G="true",P="qcmMono",w=b=>new Set(b).size;class H extends Q{versionQcm;versionQcmDisponible=!0;enonce;reponses;bonnesReponses;corrections;options;ajouteQcmCorr=!1;versionAleatoire;versionOriginale=void 0;constructor(){super(),this.besoinFormulaire2CaseACocher=["Consigne augmentée",!1],this.sup2=!1,this.nbQuestions=1,this.nbQuestionsModifiable=!1,this.spacingCorr=2,this.options={vertical:!1,ordered:!1,lastChoice:8},this.versionOriginale!=null&&this.versionOriginale()}nouvelleVersion(){this.sup2?this.consigne=this.bonnesReponses==null?`Parmi les ${this.reponses.length} réponses ci-dessous, une seule est correcte.<br>
${this.interactif||C.isAmc?"Cocher la case correspondante":"Donner la lettre correspondante"}${this.sup4?", ou choisir « Je ne sais pas ».":"."}`:`Parmi les ${this.reponses.length} réponses ci-dessous, il peut y avoir plusieurs bonnes réponses.<br>
${this.interactif||C.isAmc?"Cocher la (ou les) case(s) correspondante(s)":"Donner la (ou les) lettre(s) correspondante(s)"}${this.sup4?", ou choisir « Je ne sais pas ».":"."}`:this.consigne="";const r=[];if(this.bonnesReponses==null)r.fill(!1,0,this.reponses.length-1),r[0]=!0;else for(let s=0;s<this.reponses.length;s++)r[s]=this.bonnesReponses[s]??!1;if(this.versionAleatoire!=null)for(let s=0,c=0;s<this.nbQuestions&&c<30;){this.sup&&this.versionOriginale!=null?this.versionOriginale():this.versionAleatoire();const a=this.reponses[0];if(this.questionJamaisPosee(s,a)){let p=this.enonce;this.autoCorrection[s]={},this.options!=null&&(this.autoCorrection[s].options={...this.options});const e=this.autoCorrection[s];e.propositions=[];for(let t=0;t<this.reponses.length;t++)e.propositions.push({texte:this.reponses[t],statut:r[t]});this.sup4&&(e.propositions.push({texte:"Je ne sais pas",statut:!1}),e.options&&(e.options.lastChoice=this.reponses.length-1));const l=["A","B","C","D","E","F","G","H","I","J"].slice(0,this.reponses.length),i=x(this,s,{style:"margin:0 3px 0 3px;",format:this.interactif?"case":"lettre"});p+=`<br>${i.texte}`;let u;if(this.corrections&&e.propositions!=null){this.correction="";const t=new Array(this.reponses.length),o=e.propositions;for(let n=0;n<this.reponses.length;n++){const f=this.reponses.findIndex(d=>d===o[n].texte);this.corrections[f]!=null&&this.corrections[f]!==""&&(t[n]=`réponse ${l[n]} : ${this.corrections[f]}${o[n].statut?"✅":"❌"}<br>`)}const h=t.filter(n=>n!=null&&n!=="");h.length!==0?this.correction=v({items:h,style:"fleches"}):this.correction+=this.correction.endsWith("\\end{tikzpicture}")?`

`:this.correction!==""?"<br>":""}else this.correction+=this.correction?.endsWith("\\end{tikzpicture}")?`

`:this.correction!==""?"<br>":"";if(this.ajouteQcmCorr&&(this.correction+=`<br>${i.texteCorr}`),this.bonnesReponses){const t=e.propositions.map((o,h)=>Object.assign({},{prop:o,index:h})).filter(o=>o.prop.statut).map(o=>l[o.index]);u=`Les bonnes réponses sont les réponses ${m(t.join(" ; "))}.`}else{const t=l[e.propositions.findIndex(o=>o.statut)];u=`La bonne réponse est la réponse ${m(t)}.`}const g=`${this.correction}${this.interactif?"":u}`;this.listeQuestions[s]=p,this.listeCorrections[s]=g,s++}if(c++,this.sup)break}else{this.versionOriginale!=null&&this.versionOriginale();let s=this.enonce;this.autoCorrection[0]={},this.options!=null&&(this.autoCorrection[0].options={...this.options});const c=this.autoCorrection[0];c.propositions=[];for(let i=0;i<this.reponses.length;i++)c.propositions.push({texte:this.reponses[i],statut:r[i]});const a=["A","B","C","D","E","F","G","H","I","J"].slice(0,this.reponses.length),p=x(this,0,{style:"margin:0 3px 0 3px;",format:this.interactif?"case":"lettre"});s+=`<br>${p.texte}`,this.ajouteQcmCorr&&(this.correction+=`<br>${p.texteCorr}`);const e=a[c.propositions.findIndex(i=>i.statut)],l=`${this.correction}<br>${this.interactif?"":`La bonne réponse est la réponse ${m(e)}.`}`;this.listeQuestions[0]=s,this.listeCorrections[0]=l}}qcmCamExport(){return $(this)}}export{G as amcReady,P as amcType,H as default,z as interactifReady,F as interactifType,w as nombreElementsDifferents};

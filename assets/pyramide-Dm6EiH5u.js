import{a as b,r as h,a2 as f,ct as c,b as v}from"./embellissements-BYV7mIDn.js";class p{operation;nombreEtages;valeurs;isVisible;fractionOn;constructor({operation:i="+",nombreEtages:e=3,rangeData:l=[1,10],exclusions:a=[],fractionOn:r=!1}){this.operation=i,this.nombreEtages=e,this.valeurs=[],this.isVisible=[],this.fractionOn=r;for(let s=e-1;s>=0;s--){this.valeurs[s]=[],this.isVisible[s]=[];for(let t=0,u,n;t<=s;t++){if(s===e-1)if(this.fractionOn){const o=l;n=b(o[1]),u=h(o[0][0],o[0][1],a.concat([n])),this.valeurs[s][t]=f(u,n).simplifie()}else{const o=l;this.valeurs[s][t]=h(o[0],o[1],a)}else switch(i){case"+":this.fractionOn?this.valeurs[s][t]=this.valeurs[s+1][t].sommeFraction(this.valeurs[s+1][t+1]).simplifie():this.valeurs[s][t]=Number(this.valeurs[s+1][t])+Number(this.valeurs[s+1][t+1]);break;case"*":this.fractionOn?this.valeurs[s][t]=this.valeurs[s+1][t].produitFraction(this.valeurs[s+1][t+1]).simplifie():this.valeurs[s][t]=Number(this.valeurs[s+1][t])*Number(this.valeurs[s+1][t+1]);break}this.isVisible[s][t]=!1}}}visible(i,e){return this.isVisible[e][i]}estSolvable(i,e){return this.visible(i,e)?!0:e===this.nombreEtages-1?!1:this.estSolvable(i,e+1)&&this.estSolvable(i+1,e+1)}choisisUneCaseNonVisible(){let i,e,l=!1,a=0;do{a++,e=h(1,this.nombreEtages-1),i=h(0,e);let r=!0;for(let s=0;s<e;s++)s!==i&&!this.visible(s,e)&&(r=!1);r&&a<20?l=!1:l=!this.visible(i,e)}while(!l);return[i,e]}aleatoirise(){let i=!1;do{const[e,l]=this.choisisUneCaseNonVisible();this.isVisible[l][e]=!0,i=this.estSolvable(0,0)}while(!i)}representeMoi(i=0,e=0){const l=[],a=this.fractionOn?2:1;for(let r=this.nombreEtages;r>0;r--)for(let s=0;s<r;s++)l.push(new c({xMin:i+s*4+(this.nombreEtages-r)*2,yMin:e+(this.nombreEtages-r)*a,xMax:i+s*4+4+(this.nombreEtages-r)*2,yMax:e+(1+this.nombreEtages-r)*a}).addTextIn({textIn:this.isVisible[r-1][s]?this.fractionOn?this.valeurs[r-1][s].texFractionSimplifiee:v(Number(this.valeurs[r-1][s]),0):"",opacity:1}).render());return l}}export{p as P};

import O from"./ExerciceSimple-CWWOU0FG.js";import{S as L}from"./main-Vl0czKSA.js";import{f as B}from"./figureApigeom-Da_B6AP0.js";import{a as x,ay as v,dG as q,bh as C,r as M}from"./embellissements-BYV7mIDn.js";import{q as F}from"./exerciseMethods-CtbYPwln.js";import"./Exercice-DtXhjCyI.js";import"./index-BUDQz6-w.js";import"katex";import"mathjs";import"decimal.js";import"earcut";import"roughjs";import"crypto-js";import"seedrandom";import"./generalStore-C3E9FHtR.js";import"./canStore-DaSrd7sp.js";const D="/kopmaths974/assets/bluePolygon-CGvOZaWj.svg",re="31/07/2024",se="03/09/2024",ne="Résoudre une grille de Shikaku",le=!0,ae="custom",ue="ccf19",ge={"fr-fr":["EN-Shikaku"],"fr-ch":[]};class he extends O{figure;figureCorrection;goodAnswers;longueur;largeur;constructor(){super(),this.goodAnswers=[],this.typeExercice="simple",this.nbQuestions=1,this.nbQuestionsModifiable=!1,this.reponse="",this.exoCustomResultat=!0,this.besoinFormulaireTexte=["Hauteur de la grille","Choisir un nombre entier entre 2 et 15."],this.besoinFormulaire2Texte=["Longueur de la grille","Choisir un nombre entier entre 2 et 15."],this.besoinFormulaire3Texte=["Nombre minimum de rectangles ou carrés"," Choisir un nombre entier."],this.sup=5,this.sup2=5,this.sup3=3,this.longueur=this.sup,this.largeur=this.sup2}nouvelleVersion(){this.consigne="Cette grille de Shikaku doit être divisée en rectangles ou carrés, chacun contenant un seul nombre. Le nombre indique le nombre de cases que doit contenir le rectangle ou le carré. ",this.consigne+="Tous les rectangles et carrés doivent se toucher par leurs côtés et remplir la grille entière sans chevauchement. ",this.consigne+="<br>Pour être certain que rien ne se chevauche, les rectangles et carrés doivent tous avoir strictement la même couleur de fond. ",this.comment="Grâce au choix de la longueur et de la hauteur de la grille, vous pouvez graduer la difficulté des grilles SquarO proposés.",this.comment+="<br>Si vous précisez un nombre minimum de rectangles ou carrés, alors si ce nombre minimum est trop élevé pour créer une grille pertinente pour la taille demandée, il ne sera pas pris en compte.",this.longueur=Math.max(2,Math.min(parseInt(this.sup),15))||2,this.largeur=Math.max(2,Math.min(parseInt(this.sup2),15))||2,this.figure=new L({xMin:-.25,yMin:-.25,height:this.longueur*30+20,width:this.largeur*30+20,border:!1}),this.figure.create("Grid",{strokeWidthGrid:1,color:"black",yMin:0,xMax:this.largeur,yMax:this.longueur,xMin:0,axeX:!1,axeY:!1,labelX:!1,labelY:!1}),this.figure.snapGrid=!0,this.figure.options.color="blue",this.figure.options.shape="o",this.figure.options.labelIsVisible=!1,this.figure.options.gridWithTwoPointsOnSamePosition=!1,this.figure.setToolbar({tools:["DRAG","REMOVE"],position:"top"}),this.figureCorrection=new L({xMin:-.25,yMin:-.25,height:this.longueur*30+20,width:this.largeur*30+20,border:!1}),this.figureCorrection.create("Grid",{strokeWidthGrid:1,color:"black",yMin:0,xMax:this.largeur,yMax:this.longueur,xMin:0,axeX:!1,axeY:!1,labelX:!1,labelY:!1}),this.figureCorrection.snapGrid=!0,this.figureCorrection.options.color="red",this.figureCorrection.options.shape="o",this.figureCorrection.options.labelIsVisible=!1;const m=()=>{this.figure.options.tmpShape="o",this.figure.options.shape="",this.figure.options.tmpColor="blue",this.figure.options.colorPointPolygon="none",this.figure.options.color=C,this.figure.options.thickness=3,this.figure.options.tmpFillColor="blue",this.figure.options.fillColor=C,this.figure.ui?.send("POLYGON")},y=()=>{for(const e of this.figure.elements.values())e.type==="Point"&&e.remove();this.figure.saveState()};this.figure.addCustomButton({action:m,tooltip:"Dessiner un polygone bleu",url:D}),this.figure.addCustomButton({action:y,tooltip:"Effacer tous les points",url:F});const b=B({exercice:this,i:0,figure:this.figure});this.goodAnswers=[];const g=this.largeur,l=this.longueur;let h=1,a,c;function P(e,i,t,r){if(e+t>g||i+r>l)return!1;for(let n=e;n<e+t;n++)for(let o=i;o<i+r;o++)if(a[n][o].value!==-1)return!1;return!0}function k(e,i,t,r){const n=t*r,o=[];for(let s=e;s<e+t;s++)for(let f=i;f<i+r;f++){const w=x(v(n,o));a[s][f]={value:w===n?n:"",regionId:h},o.push(w)}c.push({topLeft:[e,i],bottomRight:[e+t-1,i+r-1]}),h++}function I(){for(let e=0;e<g;e++)for(let i=0;i<l;i++)if(a[e][i].value===-1){let t=!1;for(;!t;){const r=M(1,g-e),n=M(1,l-i);P(e,i,r,n)&&(k(e,i,r,n),t=!0)}}}let A=0;do a=Array.from({length:g},()=>Array.from({length:l},()=>({value:-1,regionId:-1}))),c=[],I(),A++;while(c.length<parseInt(this.sup3)&&A<10);function G(e,i){const t=e.length,r=Array.from({length:t},()=>Array(t).fill({value:" ",regionId:-1}));for(let o=0;o<t;o++)for(let s=0;s<t;s++)r[s][t-1-o]=e[o][s];const n=i.map(o=>({topLeft:[o.topLeft[1],t-1-o.bottomRight[0]],bottomRight:[o.bottomRight[1],t-1-o.topLeft[0]]}));return{grid:r,rectangles:n}}function S(e,i){const t=e.length,r=Array.from({length:t},()=>Array(t).fill({value:" ",regionId:-1}));for(let o=0;o<t;o++)for(let s=0;s<t;s++)r[t-1-o][t-1-s]=e[o][s];const n=i.map(o=>({topLeft:[t-1-o.bottomRight[0],t-1-o.bottomRight[1]],bottomRight:[t-1-o.topLeft[0],t-1-o.topLeft[1]]}));return{grid:r,rectangles:n}}function T(e,i){const t=e.length,r=e[0].length,n=Array.from({length:t},()=>Array(r).fill({value:" ",regionId:-1}));for(let s=0;s<t;s++)for(let f=0;f<r;f++)n[t-1-s][r-1-f]=e[s][f];const o=i.map(s=>({topLeft:[t-1-s.bottomRight[0],r-1-s.bottomRight[1]],bottomRight:[t-1-s.topLeft[0],r-1-s.topLeft[1]]}));return{grid:n,rectangles:o}}function E(e,i){const t=e.length,r=Array.from({length:t},()=>Array(t).fill({value:" ",regionId:-1}));for(let o=0;o<t;o++)for(let s=0;s<t;s++)r[t-1-s][o]=e[o][s];const n=i.map(o=>({bottomRight:[t-1-o.topLeft[1],o.bottomRight[0]],topLeft:[t-1-o.bottomRight[1],o.topLeft[0]]}));return{grid:r,rectangles:n}}let d={grid:a,rectangles:c};if(this.largeur===this.longueur)switch(x(v(4))){case 2:{d=G(a,c);break}case 3:{d=S(a,c);break}case 4:{d=E(a,c);break}}else switch(x(v(2))){case 2:{d=T(a,c);break}}const p=d.grid,u=d.rectangles;for(let e=0;e<this.largeur;e++)for(let i=0;i<this.longueur;i++)this.figure.create("TextByPosition",{anchor:"middleCenter",text:p[this.largeur-e-1][i].value.toString(),y:i+.5,x:this.largeur-e-.5}),this.figureCorrection.create("TextByPosition",{anchor:"middleCenter",text:p[this.largeur-e-1][i].value.toString(),y:i+.5,x:this.largeur-e-.5});for(let e=0;e<u.length;e++){const i=this.figure.create("Point",{x:u[e].bottomRight[0]+1,y:u[e].bottomRight[1]+1,isVisible:!1}),t=this.figure.create("Point",{x:u[e].bottomRight[0]+1,y:u[e].topLeft[1],isVisible:!1}),r=this.figure.create("Point",{x:u[e].topLeft[0],y:u[e].topLeft[1],isVisible:!1}),n=this.figure.create("Point",{x:u[e].topLeft[0],y:u[e].bottomRight[1]+1,isVisible:!1});this.goodAnswers.push([{x:i.x,y:i.y},{x:t.x,y:t.y},{x:r.x,y:r.y},{x:n.x,y:n.y}]),this.figureCorrection.create("Polygon",{points:[i,t,r,n],thickness:3,color:C,fillColor:q})}function R(){m(),document.removeEventListener("exercicesAffiches",R)}document.addEventListener("exercicesAffiches",R);const V="",j="Voici une solution possible :<br>";this.question=V+b,this.correction=j+this.figureCorrection.getStaticHtml();for(let e=0;e<this.largeur;e++)for(let i=0;i<this.longueur;i++){let t="";i!==0&&p[this.largeur-e-1][i].regionId!==p[this.largeur-e-1][i-1].regionId&&(t="1"),e!==this.largeur-1&&p[this.largeur-e-1][i].regionId!==p[this.largeur-e-2][i].regionId&&(t+="b"),t+="/"+p[this.largeur-e-1][i].value.toString()}}correctionInteractive=()=>{this.answers==null&&(this.answers={}),this.answers[this.figure.id]=this.figure.json;const m=document.querySelector(`#feedbackEx${this.numeroExercice}Q0`);let y=!0;const b=[...this.figure.elements.values()].filter(h=>h.type==="Polygon").length;let g=b===this.goodAnswers.length,l;if(!g)return b>this.goodAnswers.length?l="Trop de polygones ont été tracés.":b>0?l="Trop peu de polygones ont été tracés.":l="Aucun polygone n'a été tracé.",m.innerHTML=l,["KO"];for(let h=0;h<this.goodAnswers.length;h++)y=this.figure.checkPolygon({points:this.goodAnswers[h]}).isValid,g&&=y;return this.figure.isDynamic=!1,this.figure.divButtons.style.display="none",this.figure.divUserMessage.style.display="none",this.figure.buttons.get("SHAKE")?.click(),g?(m.innerHTML="Bravo !",["OK"]):(m.innerHTML="Au moins un polygone n'a pas la bonne aire.",["KO"])}}export{se as dateDeModifImportante,re as dateDePublication,he as default,le as interactifReady,ae as interactifType,ge as refs,ne as titre,ue as uuid};

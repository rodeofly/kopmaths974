import{a2 as r,p as d,B as k,aa as w,a4 as A,a3 as L,ab as x,e as g,k as B,F as S}from"./embellissements-BYV7mIDn.js";function h(u){return typeof u=="object"&&u instanceof S}function T(u){return h(u)?u.simplifie().toLatex():r(u,1).toLatex()}class F{nom;proba;enfants;rationnel;visible;alter;racine;taille;pos;constructor({nom:s,proba:t,enfants:e,rationnel:n,visible:o,alter:i,racine:a}){this.racine=a!==void 0?!!a:!1,this.enfants=e!==void 0?[...e]:[],this.nom=s!==void 0?String(s):"",this.rationnel=n!==void 0?!!n:!0,this.proba=t!==void 0?h(t)?t.simplifie():r(t,1):r(0,1),this.visible=o!==void 0?o:!0,this.alter=i!==void 0?String(i):"",this.taille=0,this.pos=0}setFils(s,t,e){const n=new F({nom:s,proba:t,rationnel:e||this.rationnel});return this.enfants.push(n),n}getFils(s){if(this.nom===s)return this;for(const t of this.enfants){if(t.nom===s)return t;const e=t.getFils(s);if(e)return e}return null}setFilsProba(s,t,e){let n=this.getFils(s);return n?n.proba=h(t)?t:r(t,1):(n=new F({nom:s,proba:t,rationnel:e||this.rationnel}),this.enfants.push(n)),n}getProba(s){let t=r(0,1),e=r(0,1),n;if(this.nom===s)return h(this.proba)?this.proba.simplifie():r(this.proba*100,100);for(const o of this.enfants)if(o.nom===s){const i=o.proba;t=t.sommeFraction(i)}else{n=o.getProba(s);const i=h(e)?e:r(e,1),a=h(o.proba)?o.proba:r(o.proba,1),b=h(n)?n:r(n,1);e=i.sommeFraction(a.produitFraction(b))}return t=t.sommeFraction(h(e)?e:r(e,1)),h(t)?t.simplifie():r(t,1)}branches(){let s=0;if(this.enfants.length===0)return 1;for(const t of this.enfants)s+=t.branches();return s}setTailles(){try{this.taille=this.branches();for(const s of this.enfants)s.setTailles()}catch(s){return console.error(s),!1}return!0}represente(s=0,t=0,e=0,n=1,o=!1,i=-1,a){a=a||5;const b=[],f=d(o?s:s+e+this.taille*n/2,o?t+e-this.taille*n/2:t,"","center"),p=d(o?s-i*5:s,o?t:t-i*5),c=k(this.nom,f.x+(o?.1*i:0),f.y+(o?0:.5*i),"black",15*this.nom.length,20,"white",a),m=o?w(f,p,.7,"","center"):A(w(f,p,.6),L(f.x>p.x?.5:-.5,0),"","center");m.positionLabel="center";const P=this.visible?x(this.rationnel?T(this.proba):g(this.proba.valueOf(),4),m,"black",20,24,"white",a):x(this.alter,m,"black",20,24,"white",a);if(this.enfants.length===0)return[B(p,f),c,P];for(let l=0;l<this.enfants.length;l++)b.push(...this.enfants[l].represente(o?s+i*5:s+e+this.taille*n/2,o?t+e-this.taille*n/2:t+i*5,o?n*((this.enfants.length/2-l)*this.enfants[l].taille):n*((l-this.enfants.length/2)*this.enfants[l].taille),n,o,i,a));return this.racine?b.push(c):b.push(B(p,f),c,P),b}}export{F as A,T as t};

import{O as L,c as z,bg as I,ah as j,p as W}from"./embellissements-BYV7mIDn.js";function k(w,t,s,e){const h=t*Math.PI/180,i=Math.cos(h),r=Math.sin(h),n=1-2*w,o=i*i+r*r*n,a=i*r*(1-n),x=i*r*(1-n),l=r*r+i*i*n,c=s-o*s-x*e,d=e-a*s-l*e;return{a:o,b:a,c:x,d:l,tx:c,ty:d}}function P(w,t,s,e,h,i,r){const n=(s-w)/2,o=(e-t)/2,a=Math.cos(h),x=Math.sin(h),l=Math.abs(n*a)+Math.abs(o*x),c=Math.abs(n*x)+Math.abs(o*a),d=(w+s)/2,u=(t+e)/2,m=a*(d-i)-x*(u-r)+i,g=x*(d-i)+a*(u-r)+r;return[m-l,g-c,m+l,g+c]}class F extends L{codeSvg;codeTikz;x;y;angle;scale;width;height;pixelsParCm;bordures;opacite=1;constructor({name:t="",codeSvg:s,codeTikz:e,x:h=0,y:i=0,angle:r=0,scale:n={x:1,y:1},width:o,height:a,pixelsParCm:x=z.pixelsParCm,opacite:l=1,bordures:c}){super(),this.name=t,this.codeSvg=s,this.codeTikz=e,this.x=h,this.y=i,this.angle=r,this.scale=n,this.width=o,this.height=a,this.pixelsParCm=x,this.opacite=l,this.bordures=c??[this.x-this.width/2,this.y-this.height/2,this.x+this.width/2,this.y+this.height/2]}svg(t){return`<g opacity=${this.opacite} transform="translate(${(this.x*t).toFixed(2)}, ${(-this.y*t).toFixed(2)}) ${this.scale.x!==1||this.scale.y!==1||t!==20?`scale(${(this.scale.x*t/20).toFixed(3)},${(this.scale.y*t/20).toFixed(3)})`:""} ${this.angle!==0?`rotate(${(-this.angle).toFixed(2)})`:""}">${this.codeSvg}</g>`}tikz(){return`\\begin{scope}[fill opacity=${this.opacite}, shift={(${this.x.toFixed(2)},${this.y.toFixed(2)})}${this.scale.x!==1?`, xscale=${this.scale.x.toFixed(3)}`:""}${this.scale.y!==1?`, yscale=${this.scale.y.toFixed(3)}`:""}${this.angle!==0?`, rotate around={${this.angle}:(0,0)}`:""}]
    ${this.codeTikz}
    \\end{scope}`}updateBordures(){this.bordures=[this.x-this.width/2,this.y-this.height/2,this.x+this.width/2,this.y+this.height/2],this.angle!==0&&(this.bordures=P(this.bordures[0],this.bordures[1],this.bordures[2],this.bordures[3],this.angle*Math.PI/180,this.x,this.y))}rotate(t){return this.angle+=t,this.bordures=P(this.bordures[0],this.bordures[1],this.bordures[2],this.bordures[3],t*Math.PI/180,this.x,this.y),this}dilate(t){typeof t=="number"&&(t={x:t,y:t}),this.scale.x*=t.x,this.scale.y*=t.y,this.width=this.width*t.x,this.height=this.height*t.y;let s=this.bordures[0],e=this.bordures[1],h=this.bordures[2],i=this.bordures[3];return s=(s-this.x)*t.x+this.x,e=(e-this.y)*t.y+this.y,h=(h-this.x)*t.x+this.x,i=(i-this.y)*t.y+this.y,this.bordures=[s,e,h,i],this}translate(t,s){return this.x+=t,this.y+=s,this.bordures=[this.bordures[0]+t,this.bordures[1]+s,this.bordures[2]+t,this.bordures[3]+s],this}flip(t="x"){return t==="x"?(this.scale.x=-this.scale.x,this.angle=-this.angle):t==="y"?(this.scale.y=-this.scale.y,this.angle=-this.angle):t==="xy"&&(this.scale.x=-this.scale.x,this.scale.y=-this.scale.y),this}clone(){const t=String(this.codeTikz),s=String(this.codeSvg),e=Number(this.x),h=Number(this.y),i=Number(this.angle),r={x:this.scale.x,y:this.scale.y},n=Number(this.width),o=Number(this.height),a=Number(this.pixelsParCm);return new F({codeSvg:s,codeTikz:t,x:e,y:h,angle:i,scale:r,width:n,height:o,pixelsParCm:a,opacite:this.opacite,bordures:this.bordures})}}class y extends F{codeSvg;codeTikz;scale;angle;width;height;pixelsParCm;axes;nonAxe;centre;nbAxes;name;bordures;opacite;constructor({codeSvg:t,codeTikz:s,x:e=0,y:h=0,angle:i=0,scale:r={x:1,y:1},width:n=0,height:o=0,pixelsParCm:a=z.pixelsParCm,axes:x=[],nonAxe:l=null,centre:c=null,nbAxes:d,opacite:u=1,name:m=Date.now().toString(),bordures:g}){super({codeSvg:t,codeTikz:s,x:e,y:h,angle:i,scale:r,width:n,height:o}),this.name=m,this.x=e,this.y=h,this.width=n,this.height=o,this.pixelsParCm=a,this.angle=i,this.scale=r,this.codeSvg=t,this.codeTikz=s,this.opacite=u,this.bordures=[this.x-this.width/2,this.y-this.height/2,this.x+this.width/2,this.y+this.height/2],this.axes=x,this.nonAxe=l,this.nbAxes=d??this.axes.length,this.centre=c,this.angle!==0&&(this.bordures=P(this.bordures[0],this.bordures[1],this.bordures[2],this.bordures[3],this.angle*Math.PI/180,this.x,this.y))}svg(t){return`<g opacity=${this.opacite} transform="translate(${(this.x*t).toFixed(2)}, ${(-this.y*t).toFixed(2)}) scale(${this.scale.x.toFixed(3)},${this.scale.y.toFixed(3)}) rotate(${(-this.angle).toFixed(2)})">${this.codeSvg}</g>`}tikz(){return`\\begin{scope}[fill opacity=${this.opacite}, shift={(${this.x.toFixed(2)},${this.y.toFixed(2)})}, xscale=${this.scale.x.toFixed(3)}, yscale=${this.scale.y.toFixed(3)}, rotate around={${-this.angle.toFixed(2)}:(0,0)}]
    ${this.codeTikz}
    \\end{scope}`}rotate(t){return this.angle+=t,this.bordures=P(this.bordures[0],this.bordures[1],this.bordures[2],this.bordures[3],this.angle*Math.PI/180,this.x,this.y),this}dilate(t){typeof t=="number"&&(t={x:t,y:t}),this.scale.x*=t.x,this.scale.y*=t.y,this.width=this.width*t.x,this.height=this.height*t.y;let s=this.bordures[0],e=this.bordures[1],h=this.bordures[2],i=this.bordures[3];return s=(s-this.x)*t.x+this.x,e=(e-this.y)*t.y+this.y,h=(h-this.x)*t.x+this.x,i=(i-this.y)*t.y+this.y,this.bordures=[s,e,h,i],this}translate(t,s){return this.x+=t,this.y+=s,this.bordures=[this.bordures[0]+t,this.bordures[1]+s,this.bordures[2]+t,this.bordures[3]+s],this}flip(t="x"){return t==="x"?(this.scale.x=-this.scale.x,this.angle=-this.angle):t==="y"?(this.scale.y=-this.scale.y,this.angle=-this.angle):t==="xy"&&(this.scale.x=-this.scale.x,this.scale.y=-this.scale.y),this}symetrie(t){const s=Math.atan2(t.y1-t.y2,t.x2-t.x1)*180/Math.PI,{a:e,b:h,c:i,d:r,tx:n,ty:o}=k(1,s,0,0),a=`<g transform="matrix(${e}, ${h}, ${i}, ${r}, ${n}, ${o})">${this.codeSvg}</g>`,x=e*this.x-i*this.y+n,l=-h*this.x+r*this.y-o,c=`\\begin{scope}[cm={${e.toFixed(4)},${-h.toFixed(4)},${-i.toFixed(4)},${r.toFixed(4)},(${n.toFixed(4)},${-o.toFixed(4)})}]
  ${this.codeTikz}
  \\end{scope}`,d=new y({codeSvg:a,codeTikz:c,x,y:l,angle:(360-this.angle)%360,scale:this.scale,width:this.width,height:this.height,pixelsParCm:this.pixelsParCm,axes:this.axes.map(u=>I(u,t)),nonAxe:this.nonAxe,centre:this.centre==null?null:I(this.centre,t),nbAxes:this.nbAxes,opacite:this.opacite,name:this.name+"_sym"});return d.bordures=P(d.bordures[0],d.bordures[1],d.bordures[2],d.bordures[3],s*Math.PI/180,x,l),d}copy(t){const s=String(this.codeTikz),e=String(this.codeSvg),h=Number(this.x),i=Number(this.y),r=Number(this.angle),n={x:this.scale.x,y:this.scale.y},o=Number(this.width),a=Number(this.height),x=Number(this.pixelsParCm),l=this.axes.map(g=>g),c=this.centre,d=Number(this.nbAxes),u=Number(this.opacite),m=t;return new y({codeSvg:e,codeTikz:s,x:h,y:i,angle:r,scale:n,width:o,height:a,pixelsParCm:x,axes:l,centre:c,nbAxes:d,opacite:u,name:m})}rotationAnimee({angleStart:t=0,angleEnd:s=180,cx:e,cy:h,duration:i="2s",repeatCount:r="indefinite",loop:n=!0,delay:o=0}){return e===void 0?e=this.x*this.pixelsParCm:e*=this.pixelsParCm,h===void 0?h=-this.y*this.pixelsParCm:h*=-this.pixelsParCm,new y({codeSvg:`<g> 
      <animateTransform
      attributeName="transform"
      type="rotate"
      from="${t} ${e} ${h}"
      to="${s} ${e} ${h}"
      dur="${i}"
      repeatCount="${r}"
      begin="${n?`0s; ${o}s`:"0s"}"
      keyTimes="0;0.4;0.5;0.9;1"
      values="${t} ${e} ${h};${s} ${e} ${h};${s} ${e} ${h};${t} ${e} ${h};${t} ${e} ${h}"
      />
        <g transform="translate(${this.x*this.pixelsParCm}, ${-this.y*this.pixelsParCm}) scale(${this.scale.x},${this.scale.y}) rotate(${-this.angle})">${this.codeSvg}</g>
      </g>`,codeTikz:`\\begin{scope}[shift={(${this.x},${this.y})}, xscale=${this.scale.x}, yscale=${this.scale.y}, rotate around={${this.angle}:(0,0)}]${this.codeTikz}\\end{scope})`,width:this.width,height:this.height,pixelsParCm:this.pixelsParCm})}dilatationAnimee({cx:t,cy:s,factorXStart:e=1,factorXEnd:h=-1,factorYStart:i=1,factorYEnd:r=1,duration:n="1s",repeatCount:o="infinite",loop:a=!0,delay:x=0}){return t===void 0&&(t=this.x*this.pixelsParCm),s===void 0&&(s=-this.y*this.pixelsParCm),new y({codeSvg:`<g transform="translate(${t}, ${s})"> 
      <g>
      <animateTransform
      attributeName="transform"
      type="scale"
      from="${e} ${i}"
      to="${h} ${r}"
      dur="${n}"
      repeatCount="${o}"
      begin="${a?`0s; ${x}s`:"0s"}"
      keyTimes="0;0.4;0.5;0.9;1"
      values="${e} ${i};${h} ${r};${h} ${r};${e} ${i};${e} ${i}"
      />
        <g transform=" scale(${this.scale.x},${this.scale.y}) rotate(${-this.angle})">${this.codeSvg}</g>
      </g>
      </g>`,codeTikz:`\\begin{scope}[shift={(${this.x},${this.y})}, xscale=${this.scale.x}, yscale=${this.scale.y}, rotate around={${this.angle}:(0,0)}]${this.codeTikz}\\end{scope})`,width:this.width,height:this.height,pixelsParCm:this.pixelsParCm})}translationAnimee({dx:t,dy:s,duration:e="1s",repeatCount:h="infinite",loop:i=!0,delay:r=0}){return new y({codeSvg:`<g>
      <animateTransform
      attributeName="transform"
      type="translate"
      from="${this.x*this.pixelsParCm} ${-this.y*this.pixelsParCm}"
      to="${this.x*this.pixelsParCm+t} ${-this.y*this.pixelsParCm-s}"
      dur="${e}"
      repeatCount="${h}"
      begin="${i?`0s; ${r}s`:"0s"}"
      keyTimes="0;0.4;0.5;0.9;1"
      values="${this.x*this.pixelsParCm} ${-this.y*this.pixelsParCm};${this.x*this.pixelsParCm+t} ${-this.y*this.pixelsParCm-s};${this.x*this.pixelsParCm+t} ${-this.y*this.pixelsParCm-s};${this.x*this.pixelsParCm} ${-this.y*this.pixelsParCm};${this.x*this.pixelsParCm} ${-this.y*this.pixelsParCm}"
      />
        <g transform=" scale(${this.scale.x},${this.scale.y}) rotate(${-this.angle})">${this.codeSvg}</g>
      </g>`,codeTikz:`\\begin{scope}[shift={(${this.x},${this.y})}, xscale=${this.scale.x}, yscale=${this.scale.y}, rotate around={${this.angle}:(0,0)}]${this.codeTikz}\\end{scope})`,width:this.width,height:this.height,pixelsParCm:this.pixelsParCm})}get axesAngles(){let t=[];return this.Axes.length>0?t=this.Axes.map(s=>Math.atan2(s.y1-s.y2,s.x2-s.x1)*180/Math.PI):this.nonAxe&&(t=[Math.atan2(this.nonAxe.y1-this.nonAxe.y2,this.nonAxe.x2-this.nonAxe.x1)*180/Math.PI]),t}loopReflectionAnimee(t,s,e){const h=new y({codeSvg:`<g id="${s}" style="filter: drop-shadow(0px 0px 0px rgb(80, 80, 80))">
        ${this.svg(this.pixelsParCm)}
      </g>`,codeTikz:this.tikz(),width:this.width/this.scale.x,height:this.height/this.scale.y,pixelsParCm:this.pixelsParCm,scale:{x:1,y:1},angle:0,x:0,y:0,opacite:1}),i=this.pixelsParCm;return h.name=s,document.addEventListener("exercicesAffiches",()=>{const r=document.getElementById(s);if(!r)return;const n=(t.x1+t.x2)/2,o=(t.y1+t.y2)/2,a=document.createElementNS("http://www.w3.org/2000/svg","clipPath"),x="clip-"+s;a.setAttribute("id",x);const l=document.createElementNS("http://www.w3.org/2000/svg","rect");l.setAttribute("id",`clipingRect_${s}`);const c=500,d=500;l.setAttribute("x",String(n*i-c/2)),l.setAttribute("y",String(o*i-d/2)),l.setAttribute("width",String(c)),l.setAttribute("height",String(d)),a.appendChild(l),r.appendChild(a),r.setAttribute("clip-path",`url(#${x})`);let u=0,m=1;const g=Math.atan2(t.y1-t.y2,t.x2-t.x1)*180/Math.PI;function b(){if(r==null)return;if(u+=.004*m,u>1){u=1,m=-1,e&&e(m),setTimeout(()=>{requestAnimationFrame(b)},2e3);return}else if(u<0){u=0,m=1,e&&e(m),setTimeout(()=>{requestAnimationFrame(b)},200);return}const p=(1-Math.abs(Math.cos(u*Math.PI)))*5*Math.cos(g*Math.PI/180),A=(1-Math.abs(Math.cos(u*Math.PI)))*5*Math.sin(g*Math.PI/180),$=`drop-shadow(${p}px ${A}px 5px rgb(80, 80, 80))`;r.setAttribute("style",`filter: ${$}`);const{a:M,b:C,c:f,d:S,tx:v,ty:T}=k(u,g,n*i,o*i);r.setAttribute("transform",`matrix(${M} ${C} ${f} ${S} ${v} ${T})`),requestAnimationFrame(b)}b()}),h}autoReflectionAnimee(t,s,e){const h=new y({codeSvg:`<g id="${t}" style="filter: drop-shadow(0px 0px 0px rgb(80, 80, 80))"> 
      ${this.svg(20)}
       transform="matrix(1 0 0 1 0 0)"
      </g>`,codeTikz:this.tikz(),width:this.width/this.scale.x,height:this.height/this.scale.y,pixelsParCm:this.pixelsParCm,scale:{x:1,y:1},angle:0,x:0,y:0,opacite:1,axes:this.Axes,nonAxe:this.nonAxe,centre:this.centre}),i=this.pixelsParCm;return h.name=t,document.addEventListener("exercicesAffiches",()=>{const r=document.getElementById(t),n=document.createElementNS("http://www.w3.org/2000/svg","clipPath"),o="clip-"+t;n.setAttribute("id",o);const a=document.createElementNS("http://www.w3.org/2000/svg","rect");a.setAttribute("id",`clipingRect_${t}`);const x=500,l=500;a.setAttribute("x",String(s*i)),a.setAttribute("y",String(e*i-l/2)),a.setAttribute("width",String(x)),a.setAttribute("height",String(l)),n.appendChild(a),r?.appendChild(n),r?.setAttribute("clip-path",`url(#${o})`);let c=0,d=0,u=!1;function m(p,A){const $=document.getElementById(`clipingRect_${t}`);if(!$)return;const M=500,C=500;$.setAttribute("x",String(s*i)),$.setAttribute("y",String(e*i-C/2)),$.setAttribute("width",String(M)),$.setAttribute("height",String(C)),$.setAttribute("transform",`rotate(${p+90}, ${s*i}, ${e*i})`),c=0;function f(){c+=.004,c>1&&(c=1);const S=(1-Math.abs(Math.cos(c*Math.PI)))*5*Math.cos(p*Math.PI/180),v=(1-Math.abs(Math.cos(c*Math.PI)))*5*Math.sin(p*Math.PI/180),T=`drop-shadow(${S}px ${v}px 2px rgb(80, 80, 80))`;document.getElementById(`${t}`)?.setAttribute("style",`filter: ${T}`);const{a:N,b:B,c:O,d:q,tx:R,ty:E}=k(c,p,s*i,e*i);r?.setAttribute("transform",`matrix(${N} ${B} ${O} ${q} ${R} ${E})`),c<1?requestAnimationFrame(f):A()}requestAnimationFrame(f)}function g(p){if(u)return;u=!0;function A(){const $=p[d];m($,()=>{d=(d+1)%p.length,setTimeout(A,500)})}A()}const b=h.axesAngles;b.length===0?r?.setAttribute("transform","scale(1,1)"):g(b)}),h}set Axes(t){this.axes=t,this.nbAxes=t.length}get Axes(){return this.axes.map(t=>j(t,W(0,0),this.angle))}}export{y as F,F as S};

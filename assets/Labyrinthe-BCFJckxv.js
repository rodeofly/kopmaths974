import{r as P,k as l,p as s,W as N,br as z,bM as V,S as B,bN as G,j as I}from"./embellissements-BYV7mIDn.js";import{r as O}from"./findPath-D-bvJShA.js";class T{niveau;murs2d;chemin2d;nombres2d;choisitChemin;construitMurs;traceChemin;placeNombres;constructor({nbLignes:p=3,nbColonnes:h=6,scaleFigure:S=1}={}){this.niveau=1,this.murs2d=[],this.chemin2d=[],this.nombres2d=[];const y=[];for(let r=0;r<p;r++)for(let u=0;u<p;u++){const i=O(p,h,r,0,u,h-1);y.push(...i)}y.sort((r,u)=>u.length-r.length);const j=[];y.forEach(r=>{const u=[];r.forEach(i=>{u.push([i.x+1,p-i.y-1])}),j.push(u)});const v=j,x=y;let k=[];const E=x[0].length,A=x[x.length-1].length,D=(E-A)/4;for(let r=0;r<4;r++)k.push(x.findIndex(u=>u.length<E-r*D));k[4]=x.length,k=k.map(r=>r-1),this.choisitChemin=function(r){let u;switch(r){case 1:u=P(0,k[0]);break;case 2:case 3:case 4:case 5:u=P(k[r-2]+1,k[r-1]);break;case 6:u=P(0,x.length-1);break}return typeof u>"u"?(window.notify("choisitChemin(niveau) doit être appelé avec un niveau entre 1 et 6.",{niveau:r}),v[0]):v[u]},this.construitMurs=function(r,u){const i=[];let e,c;const a=r[0][1];for(let t=0;t<h;t++)e=l(s(t*3,1),s(t*3,2)),e.epaisseur=2,i.push(e),c=l(s(t*3,1+3*p),s(t*3,3*p)),c.epaisseur=2,i.push(c);e=l(s(0,1+3*p),s(0,3+a*3)),e.epaisseur=3,i.push(e),e=l(s(0,1),s(0,2+a*3)),e.epaisseur=3,i.push(e),e=l(s(-3,1+a*3),s(0,1+a*3),"green"),e.epaisseur=3,i.push(e),e=l(s(-3,1+a*3),s(-3,4+a*3),"green"),e.epaisseur=3,i.push(e),e=l(s(-3,4+a*3),s(0,4+a*3),"green"),e.epaisseur=3,i.push(e),i.push(N("Départ",s(-1.5,2.5+a*3),0,"blue",u,"milieu",!1));for(let t=1;t<h;t++)for(let m=0;m<p-1;m++)e=l(s(t*3,5+3*m),s(t*3,3+3*m),"black"),e.epaisseur=2,c=l(s(t*3-.5,4+3*m),s(t*3+.5,4+3*m),"black"),c.epaisseur=2,i.push(c,e);e=l(s(0,1+3*p),s(3*h,1+3*p)),e.epaisseur=3,i.push(e),e=l(s(3*h,1+3*p-1),s(3*h,1+3*p)),e.epaisseur=3,i.push(e),e=l(s(3*h,1),s(3*h,2)),e.epaisseur=3,i.push(e),e=l(s(0,1),s(3*h,1)),e.epaisseur=3,i.push(e);for(let t=0;t<p-1;t++)e=l(s(3*h,3+t*3),s(3*h,5+t*3)),e.epaisseur=3,i.push(e);for(let t=0;t<p;t++)e=l(s(3*h,2+t*3),s(3*h+2,2+t*3)),e.epaisseur=3,c=l(s(3*h,3+t*3),s(3*h+2,3+t*3)),c.epaisseur=3,i.push(e,c);for(let t=1;t<=p;t++)i.push(N(`Sortie ${t}`,s(3*h+1.5,2.5+3*p-3*t),0,"blue",u,"milieu",!1));return i},this.traceChemin=function(r,u="brown"){let i=r[0][1],e=0;const c=[];let a;for(let t=0;t<r.length;t++)a=l(s(e*3-1.5,i*3+2.5),s(r[t][0]*3-1.5,r[t][1]*3+2.5),u),a.pointilles=5,a.stylePointilles=2,a.epaisseur=5,a.opacite=.3,c.push(a),e=r[t][0],i=r[t][1];return a=l(s(e*3-1.5,i*3+2.5),s(e*3+1.5,i*3+2.5),u),a.pointilles=5,a.stylePointilles=2,a.epaisseur=5,a.opacite=.3,c.push(a),c},this.placeNombres=function(r,u,i,e){u=z(u,r.length),i=z(i,h*p-r.length);const c=[],a=[];let t,m=0,M=0;for(let f=0;f<h;f++)a.push([0,0]);for(let f=1;f<h+1;f++)for(let o=0;o<p;o++){t=!1;for(let d=0;d<r.length;d++)r[d][0]===f&&r[d][1]===o&&(t=!0);t?(a[f-1][o]=u[m],m++):(a[f-1][o]=i[M],M++)}for(let f=1;f<h+1;f++)for(let o=0;o<p;o++){const d=a[f-1][o];typeof d=="number"?c.push(V(B(d),s(-1.5+f*3,2.5+o*3),0,"black",e,"milieu",!0,S)):typeof d=="string"?c.push(G(d,-1.5+f*3,2.5+o*3,0,"black",e,"milieu",!0,S)):c.push(I(d.texFraction,-1.5+f*3,2.5+o*3,{color:"black",backgroundColor:"white",letterSize:"scriptsize"}))}return c}}}function g({nbLignes:w=3,nbColonnes:p=6,scaleFigure:h=1}={}){return new T({nbLignes:w,nbColonnes:p,scaleFigure:h})}export{g as l};

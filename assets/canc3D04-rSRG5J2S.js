import"katex";import"decimal.js";import"mathjs";import{r as l,du as g,l as v}from"./embellissements-BYV7mIDn.js";import"earcut";import"roughjs";import{E as p}from"./Exercice-DtXhjCyI.js";import"./exerciseMethods-CtbYPwln.js";import"./index-BUDQz6-w.js";import"crypto-js";import"seedrandom";class b extends HTMLElement{svgHandHour;svgHandMinute;svgHandSecond;radius=200;showHands=!0;showSecond=!1;draggingHand;previousMinute=0;previousSecond=0;_isDynamic=!0;_currentAction;constructor(){super(),this.hour=this.getAttribute("hour")?Number(this.getAttribute("hour")):12,this.minute=this.getAttribute("minute")?Number(this.getAttribute("minute")):0,this.svgHandHour=document.createElementNS("http://www.w3.org/2000/svg","line"),this.svgHandMinute=document.createElementNS("http://www.w3.org/2000/svg","line"),this.svgHandSecond=document.createElementNS("http://www.w3.org/2000/svg","line"),this.showHands=this.getAttribute("showHands")!=="false",this.showSecond=this.hasAttribute("showSecond")?this.getAttribute("showSecond")!=="false":!1,this.isDynamic=this.getAttribute("isDynamic")!=="false",this.draggingHand=!1}connectedCallback(){const e=document.createElement("div");e.className="flex flex-wrap items-center";const n=document.createElement("div");n.className="flex-1 flex justify-center items-center p-8";const t=document.createElementNS("http://www.w3.org/2000/svg","svg");n.appendChild(t),t.setAttribute("width","200"),t.setAttribute("height","200"),t.setAttribute("viewBox","-200 -200 400 400");const c=document.createElementNS("http://www.w3.org/2000/svg","circle");c.setAttribute("cx","0"),c.setAttribute("cy","0"),c.setAttribute("r","200"),c.setAttribute("stroke","black"),c.setAttribute("stroke-opacity","0.8"),c.setAttribute("fill","none"),t.appendChild(c);const r=document.createElementNS("http://www.w3.org/2000/svg","circle");r.setAttribute("cx","0"),r.setAttribute("cy","0"),r.setAttribute("r","10"),r.setAttribute("stroke","black"),r.setAttribute("fill","black"),t.appendChild(r);for(let i=1;i<=12;i++){const o=i/12*2*Math.PI,s=Math.sin(o)*160,u=-Math.cos(o)*160,a=document.createElementNS("http://www.w3.org/2000/svg","text");a.setAttribute("x",s.toString()),a.setAttribute("y",u.toString()),a.setAttribute("text-anchor","middle"),a.setAttribute("alignment-baseline","middle"),a.setAttribute("font-size","20"),a.textContent=i.toString(),a.setAttribute("pointer-events","none"),a.style.userSelect="none",a.style.webkitUserSelect="none",t.appendChild(a)}for(let i=0;i<60;i++){const o=i/60*2*Math.PI;let s=Math.sin(o)*190,u=-Math.cos(o)*190;const a=Math.sin(o)*200,m=-Math.cos(o)*200;i%5===0&&(s=Math.sin(o)*180,u=-Math.cos(o)*180);const h=document.createElementNS("http://www.w3.org/2000/svg","line");h.setAttribute("x1",s.toString()),h.setAttribute("y1",u.toString()),h.setAttribute("x2",a.toString()),h.setAttribute("y2",m.toString()),h.setAttribute("stroke","black"),i%5===0&&h.setAttribute("stroke-width","5"),t.appendChild(h)}if(this.showHands&&(this.svgHandHour=this.createHand(100,"hour"),this.svgHandMinute=this.createHand(150,"minute"),this.showSecond&&(this.svgHandSecond=this.createHand(170,"second")),this.updateHandHour(),this.updateHandMinute(),this.showSecond&&this.updateHandSecond(),t.appendChild(this.svgHandHour),t.appendChild(this.svgHandMinute),this.showSecond&&t.appendChild(this.svgHandSecond)),e.appendChild(n),this.appendChild(e),this.isDynamic){this.currentAction="minute";const i=u=>{u.preventDefault()},o=u=>{this.draggingHand=!0,t.addEventListener("pointermove",i,{passive:!1}),t.addEventListener("touchmove",i,{passive:!1})},s=()=>{this.draggingHand=!1,t.removeEventListener("pointermove",i),t.removeEventListener("touchmove",i)};t.addEventListener("pointerdown",o),t.addEventListener("pointerup",s),t.addEventListener("pointermove",u=>this.dragHand(u)),t.addEventListener("touchstart",o),t.addEventListener("touchend",s),t.addEventListener("touchmove",u=>this.dragHand(u)),this.svgHandHour.addEventListener("pointerdown",u=>{this.draggingHand=!0,this.currentAction="hour",o()}),this.svgHandHour.addEventListener("pointerup",s),this.svgHandMinute.addEventListener("pointerdown",u=>{this.draggingHand=!0,this.currentAction="minute",o()}),this.svgHandMinute.addEventListener("pointerup",s),this.showSecond&&(this.svgHandSecond.addEventListener("pointerdown",u=>{this.draggingHand=!0,this.currentAction="second",o()}),this.svgHandSecond.addEventListener("pointerup",s))}}createHand(e,n){const t=document.createElementNS("http://www.w3.org/2000/svg","line");return t.setAttribute("x1","0"),t.setAttribute("y1","0"),t.setAttribute("stroke","black"),n==="hour"?t.setAttribute("stroke-width","12"):n==="minute"?t.setAttribute("stroke-width","8"):t.setAttribute("stroke-width","3"),t.setAttribute("stroke-linecap","round"),t.setAttribute("class",n+"-hand"),t}updateHandHour(e=!0){let n=this.hour/12*2*Math.PI;e&&(n+=this.minute/360*Math.PI);const t=Math.sin(n)*100,c=-Math.cos(n)*100;this.svgHandHour.setAttribute("x2",t.toString()),this.svgHandHour.setAttribute("y2",c.toString())}updateHandMinute(){const e=this.minute/60*2*Math.PI,n=Math.sin(e)*150,t=-Math.cos(e)*150;this.svgHandMinute.setAttribute("x2",n.toString()),this.svgHandMinute.setAttribute("y2",t.toString())}updateHandSecond(){const e=this.second/60*2*Math.PI,n=Math.sin(e)*170,t=-Math.cos(e)*170;this.svgHandSecond.setAttribute("x2",n.toString()),this.svgHandSecond.setAttribute("y2",t.toString())}dragHand(e){if(!this.isDynamic||!this.draggingHand)return;const n=e.target.getBoundingClientRect(),t=e instanceof MouseEvent?e.clientX:e.touches[0].clientX,c=e instanceof MouseEvent?e.clientY:e.touches[0].clientY,r=t-n.left-n.width/2,i=c-n.top-n.height/2;if(Math.sqrt(r*r+i*i)<20)return;const o=(Math.atan2(i,r)+Math.PI/2+2*Math.PI)%(2*Math.PI),s=Math.round(o/(2*Math.PI)*(this.currentAction==="hour"?12:60));this.currentAction==="hour"?this.hour=s:this.currentAction==="minute"?(this.previousMinute>50&&s<10?this.hour=(this.hour+1)%12:this.previousMinute<10&&s>50&&(this.hour=(this.hour+11)%12),this.minute=s):this.currentAction==="second"&&(this.previousSecond>50&&s<10?this.minute=(this.minute+1)%60:this.previousSecond<10&&s>50&&(this.minute=(this.minute+59)%60),this.second=s),this.updateHandHour(),this.updateHandMinute(),this.updateHandSecond()}disconnectedCallback(){}get currentAction(){return this._currentAction}set currentAction(e){this._currentAction=e,e==="hour"?(this.svgHandHour.setAttribute("stroke","#216D9A"),this.svgHandMinute.setAttribute("stroke","#F15929"),this.svgHandSecond.setAttribute("stroke","#F15929")):e==="minute"?(this.svgHandHour.setAttribute("stroke","#F15929"),this.svgHandMinute.setAttribute("stroke","#216D9A"),this.svgHandSecond.setAttribute("stroke","#F15929")):e==="second"?(this.svgHandHour.setAttribute("stroke","#F15929"),this.svgHandMinute.setAttribute("stroke","#F15929"),this.svgHandSecond.setAttribute("stroke","#216D9A")):(this.svgHandHour.setAttribute("stroke","black"),this.svgHandMinute.setAttribute("stroke","black"),this.svgHandSecond.setAttribute("stroke","black"))}get hour(){return Number(this.getAttribute("hour"))}set hour(e){e===0&&(e=12),this.setAttribute("hour",e.toString())}get second(){return Number(this.getAttribute("second"))||0}set second(e){this.setAttribute("second",e.toString()),this.previousSecond=this.second}get isDynamic(){return this._isDynamic}set isDynamic(e){this._isDynamic=e,e||(this.currentAction=void 0)}get minute(){return Number(this.getAttribute("minute"))}set minute(e){this.setAttribute("minute",e.toString()),this.previousMinute=this.minute}}function A(){customElements.get("interactive-clock")===void 0&&customElements.define("interactive-clock",b)}const N="Indiquer l'heure sur une horloge",P=!0,H="custom",$="21/2/2025",F="51242",q={"fr-fr":["canc3D04","auto6M4B-flash1"],"fr-ch":["PR-5"]};class T extends p{goodAnswers=[];constructor(){super(),this.nbQuestions=1,this.interactifType=H,A()}nouvelleVersion(e,n){for(let t=n??0,c=0;t<(n?n+1:this.nbQuestions)&&c<50;){let r=l(1,12),i=l(1,11)*5;this.canOfficielle&&(r=13,i=30);let o=`Placer correctement les aiguilles pour indiquer ${r} h ${g(i)}.`;o+=`<br><br><interactive-clock id="clockEx${this.numeroExercice}Q${t}" isDynamic="${this.interactif}" showHands="${this.interactif}"/>`;let s="";s=`<interactive-clock hour="${r}" minute="${i}" isDynamic="false"/>`,this.questionJamaisPosee(t,r,i)&&(this.listeQuestions[t]=o,this.listeCorrections[t]=s,this.goodAnswers[t]={hour:r.toString(),minute:i.toString()},this.autoCorrection[t]={reponse:{valeur:{reponse:{value:r.toString()+"h"+i.toString()}},param:{formatInteractif:"custom"}}},t++),c++}v(this)}correctionInteractive=e=>{const n=`clockEx${this.numeroExercice}Q${e}`,t=document.querySelector(`#${n}`);if(t==null)return"KO";t.isDynamic=!1;const c=t.getAttribute("hour"),r=t.getAttribute("minute");if(this.answers==null&&(this.answers={}),this.answers[n]=`${c}h${r.toString().padStart(2,"0")}`,c===f(this.goodAnswers[e].hour)&&r===this.goodAnswers[e].minute){const i=document.createElement("div");return i.innerHTML="ðŸ˜Ž",t.parentElement?.appendChild(i),"OK"}else{const i=document.createElement("div");return i.innerHTML=`â˜¹ï¸ Les aiguilles indiquent ${t.getAttribute("hour")} h ${g(t.getAttribute("minute"))}.`,t.parentElement?.appendChild(i),"KO"}}}function f(d){const e=parseInt(d);return e>12?(e-12).toString():e.toString()}export{$ as dateDePublication,T as default,P as interactifReady,H as interactifType,q as refs,N as titre,F as uuid};

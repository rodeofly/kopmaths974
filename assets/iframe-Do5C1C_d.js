import{e as t,g as i}from"./generalStore-C3E9FHtR.js";import{g as r}from"./canStore-DaSrd7sp.js";import{createTextInput as o,createButon as s}from"./_components-DYhbsKA3.js";import{E as a}from"./Exercice-DtXhjCyI.js";import{u as n}from"./sizeTools-DfTC1Dgv.js";import"./time-DMC-jnVL.js";import"./exerciseMethods-CtbYPwln.js";import"./index-BUDQz6-w.js";import"katex";import"./embellissements-BYV7mIDn.js";import"mathjs";import"decimal.js";import"earcut";import"roughjs";import"crypto-js";import"seedrandom";const g="iframe",I="Ressource externe";class C extends a{container;iframe;fieldUrl;button;url=new URL("https://coopmaths.fr/alea");constructor(){super(),this.typeExercice="html",this.container=document.createElement("div"),this.iframe=document.createElement("iframe"),this.iframe.setAttribute("width","500"),this.iframe.setAttribute("height","315"),window.addEventListener("resize",this.updateSize),this.container.addEventListener("addedToDom",this.updateSize),this.iframe.classList.add("my-10"),this.fieldUrl=o({placeholder:"URL",autoCorrect:!1}),this.button=s(),this.container.append(this.fieldUrl,this.button,this.iframe),this.button.addEventListener("click",()=>{this.iframe.src=this.fieldUrl.value,this.sup=encodeURIComponent(this.fieldUrl.value),t.update(e=>(this.numeroExercice!==void 0&&e[this.numeroExercice]!==void 0&&(e[this.numeroExercice].sup=encodeURIComponent(this.fieldUrl.value)),e)),this.updateSize()})}updateSize=()=>{n(this.container,this.iframe)};destroy(){window.removeEventListener("resize",this.updateSize),this.container.removeEventListener("addedToDom",this.updateSize)}get html(){if(r(i).v==="eleve"&&(this.fieldUrl.remove(),this.button.remove()),this.sup!==void 0){let e;try{e=new URL(decodeURIComponent(this.sup)),e.protocol==="http:"||e.protocol==="https:"||e.protocol==="ftp:"?e=e.href:e="data:text/html,Erreur"}catch{e="data:text/html,Erreur"}this.iframe.src=e,this.fieldUrl.value=decodeURIComponent(this.sup)}return this.updateSize(),this.container}}export{C as default,I as titre,g as uuid};

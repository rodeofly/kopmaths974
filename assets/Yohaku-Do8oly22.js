import{r as a,a2 as d,a as F,F as $,u as C}from"./embellissements-BYV7mIDn.js";import{A as E}from"./AjouteTableauMathlive-Bz24QHd3.js";import"katex";import"decimal.js";import"mathjs";import"earcut";import"roughjs";import"./index-BUDQz6-w.js";/* empty css                   */import{o as v}from"./colors-bl7PrqSM.js";import{c as A}from"./compute-engine.min.umd-BwAhpA7x.js";import{K as n}from"./Exercice-DtXhjCyI.js";const S=new A.ComputeEngine;class Y{type;largeur;hauteur;taille;Case;cellules;cellulesEE;sommesCellules;cellulesPreremplies;resultats;operation;solution;clavier;constructor({type:u,largeur:c,hauteur:h,taille:m,Case:e,cellules:o,operation:g,valeurMax:s,solution:b}={type:"entiers",largeur:2,hauteur:2,taille:2,Case:void 0,resultats:[],operation:"addition",valeurMax:50,solution:!1,cellules:[]}){if(this.largeur=c??2,this.hauteur=h??2,this.Case=e,this.resultats=[],this.taille=m??2,this.operation=g,this.solution=b,this.type=u??"entiers",this.cellules=o??[],this.cellulesPreremplies=[],this.cellulesEE=[],this.sommesCellules=[],this.clavier=String(n.clavierDeBase),s==null&&(s=50),this.cellules.length===0){const f=a(2,s);for(let l=0;l<this.taille**2;l++)switch(this.type){case"entiers":this.cellules.push(String(a(1,s)??2)),this.clavier=String(n.clavierDeBase);break;case"entiers relatifs":this.cellules.push(String(a(-s,s,0))),this.clavier=String(n.clavierDeBase);break;case"littéraux":this.cellules.push(C(a(1,s),a(1,s),"x")),this.clavier=String(n.clavierDeBaseAvecVariable);break;case"fractions dénominateurs multiples":{let t=new $(a(1,s),f),r;if(l+1>=this.taille){if((l+1)%this.taille===1){r=new $(0,1);for(let i=0;i<this.taille;i++)r=r.sommeFraction(this.cellulesEE[i+this.taille*Math.floor(i/this.taille)]);this.sommesCellules.push(r)}if(l>=this.taille*(this.taille-1)){let i;do{i=!1,t=new $(a(1,s),f),r=new $(0,1);for(let p=0;p<this.taille-1;p++)r=r.sommeFraction(this.cellulesEE[l%this.taille+this.taille*p]);r=r.sommeFraction(t);for(let p=0;p<this.sommesCellules.length;p++)i=i||this.sommesCellules[p].isEqual(r)}while(i);this.sommesCellules.push(r)}}this.cellulesEE.push(t),this.cellules.push(t.texFSD.replace("dfrac","frac")),this.clavier=String(n.clavierDeBaseAvecFraction);break}case"fractions positives dénominateurs premiers":this.cellules.push(d(a(1,s),Number(F([2,3,5,7]))).texFraction.replace("dfrac","frac")),this.clavier=String(n.clavierDeBaseAvecFraction);break;case"fractions positives":this.cellules.push(d(a(1,s),a(2,s)).texFraction.replace("dfrac","frac")),this.clavier=String(n.clavierDeBaseAvecFraction);break;case"fractions relatives":this.cellules.push(d(a(-s,s,0),a(2,s)).texFraction.replace("dfrac","frac")),this.clavier=String(n.clavierDeBaseAvecFraction);break}}else{this.cellulesPreremplies=[...o??[]];for(let f=this.cellules.length;f<this.taille**2;f++)if(Array.isArray(o)&&o[f]==="")switch(this.type){case"entiers":this.cellules.push(String(a(1,s))),this.clavier=String(n.clavierDeBase);break;case"entiers relatifs":this.cellules.push(String(a(-s,s,0))),this.clavier=String(n.clavierDeBase);break;case"littéraux":this.cellules.push(C(a(1,s),a(1,s),"x")),this.clavier=String(n.clavierDeBaseAvecVariable);break;case"fractions dénominateurs multiples":{const l=S.parse(this.cellules[f-1]);if(Array.isArray(l.numericValue)){const[,t]=l.numericValue;this.cellules.push(d(a(1,s),Number(t)??1).texFraction.replace("dfrac","frac"))}this.clavier=String(n.clavierDeBaseAvecFraction)}break;case"fractions positives dénominateurs premiers":this.cellules.push(new $(a(1,s),Number(F([2,3,5,7]))).texFraction.replace("dfrac","frac")),this.clavier=String(n.clavierDeBaseAvecFraction);break;case"fractions positives":this.cellules.push(d(a(1,s),a(2,s)).texFraction.replace("dfrac","frac")),this.clavier=String(n.clavierDeBaseAvecFraction);break;case"fractions relatives":this.cellules.push(d(a(-s,s,0),a(2,s)).texFraction.replace("dfrac","frac")),this.clavier=String(n.clavierDeBaseAvecFraction);break}}}calculeResultats(){let u;for(let c=0;c<this.taille;c++){u=[];for(let h=0;h<this.taille;h++)u.push(this.cellules[c+h*this.taille]);this.resultats[c]=String(this.operate(u))}for(let c=this.taille;c<this.taille*2;c++){u=[];for(let h=0;h<this.taille;h++)u.push(this.cellules[(c-this.taille)*this.taille+h]);this.resultats[c]=String(this.operate(u))}}operate(u){let c;switch(this.operation){case"addition":return c="0",S.parse(u.reduce((h,m)=>`${h}+${m}`,c)).simplify().latex;case"multiplication":return c="1",S.parse(u.reduce((h,m)=>`(${h})\\times (${m})`,c)).simplify().latex}}representation({numeroExercice:u,question:c,isInteractif:h,classes:m=""}){const e=this.taille,o=this.taille+1,g=[this.operation==="addition"?"+":"\\times"],s="";for(let i=0;i<e;i++)g.push(`\\text{Colonne ${i+1}}`);g.push(`\\text{${this.operation==="addition"?"Sommes":"Produits"}}`);const b=[];for(let i=0;i<e;i++)b.push(`\\text{Ligne ${i+1}}`);b.push(`\\text{${this.operation==="addition"?"Sommes":"Produits"}}`);const f=this.Case==null?null:this.Case%e+Math.floor(this.Case/e)*o,l=[];let t=0,r=0;for(let i=0;i<o**2;i++)if(this.solution)if(i%o<e)if(i<o*e){const p=this.cellules[r];l.push(p),r++}else t<e*2&&(l.push(`${s}${this.resultats[(t+e)%(e*2)]}`),t++);else t<e*2&&(l.push(`${s}${this.resultats[(t+e)%(e*2)]}`),t++);else if(this.Case==null)this.cellulesPreremplies[r]!=null?i%o<e?i<o*e?(l.push(this.cellulesPreremplies[r]),r++):t<e*2&&(l.push(`${s}${this.resultats[(t+e)%(e*2)]}`),t++):t<e*2&&(l.push(`${s}${this.resultats[(t+e)%(e*2)]}`),t++):i%o<e?i<o*e?(l.push(""),r++):t<e*2&&(l.push(`${s}${this.resultats[(t+e)%(e*2)]}`),t++):t<e*2&&(l.push(`${s}${this.resultats[(t+e)%(e*2)]}`),t++);else if(i%o<e)if(i===f){const p=this.cellules[r];r++,l.push(p)}else i<o*e?this.cellulesPreremplies[r]!=null?(l.push(this.cellulesPreremplies[r]),r++):(l.push(""),r++):t<e*2&&(l.push(`${s}${this.resultats[(t+e)%(e*2)]}`),t++);else t<e*2&&(l.push(`${s}${this.resultats[(t+e)%(e*2)]}`),t++);l.push("///////");{const i=Object.fromEntries(this.solution?[["L1C1",`;${v}`],["L1C2",`;${v}`],["L2C1",`;${v}`],["L2C2",`;${v}`]]:[]);return E.create(u,c,E.convertTclToTableauMathlive(g,b,l),m+" "+this.clavier,h,i).output}}}export{Y};

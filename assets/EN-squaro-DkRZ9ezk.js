import{E as b}from"./Exercice-DtXhjCyI.js";import{S as m}from"./main-Vl0czKSA.js";import{f as x}from"./figureApigeom-Da_B6AP0.js";import{bh as w,r as k,t as y,a as v}from"./embellissements-BYV7mIDn.js";import{q as C,s as P,E as A}from"./exerciseMethods-CtbYPwln.js";import"./generalStore-C3E9FHtR.js";import"./canStore-DaSrd7sp.js";import"mathjs";import"decimal.js";import"katex";import"earcut";import"roughjs";import"./index-BUDQz6-w.js";import"crypto-js";import"seedrandom";const M="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='48.542221mm'%20height='48.542221mm'%20viewBox='0%200%20172%20172'%20id='svg9132'%20version='1.1'%20inkscape:version='1.1.1%20(3bf5ae0d25,%202021-09-20)'%20sodipodi:docname='PointLibre.svg'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%20xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23'%20xmlns:cc='http://creativecommons.org/ns%23'%20xmlns:dc='http://purl.org/dc/elements/1.1/'%3e%3cdefs%20id='defs9134'%20/%3e%3csodipodi:namedview%20id='base'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageopacity='0.0'%20inkscape:pageshadow='2'%20inkscape:zoom='9.963663'%20inkscape:cx='91.733331'%20inkscape:cy='91.733331'%20inkscape:document-units='px'%20inkscape:current-layer='layer1'%20showgrid='false'%20fit-margin-top='0'%20fit-margin-left='0'%20fit-margin-right='0'%20fit-margin-bottom='0'%20inkscape:window-width='3840'%20inkscape:window-height='2066'%20inkscape:window-x='1609'%20inkscape:window-y='-11'%20inkscape:window-maximized='1'%20inkscape:pagecheckerboard='0'%20/%3e%3cmetadata%20id='metadata9137'%3e%3crdf:RDF%3e%3ccc:Work%20rdf:about=''%3e%3cdc:format%3eimage/svg+xml%3c/dc:format%3e%3cdc:type%20rdf:resource='http://purl.org/dc/dcmitype/StillImage'%20/%3e%3c/cc:Work%3e%3c/rdf:RDF%3e%3c/metadata%3e%3cg%20inkscape:label='Calque%201'%20inkscape:groupmode='layer'%20id='layer1'%20transform='translate(-396.85714,-289.21935)'%3e%3ccircle%20id='circle1225'%20style='fill:blue;stroke:blue;stroke-width:0.9375'%20cx='482.85648'%20cy='369.90331'%20r='17.21113'/%3e%3c/g%3e%3c/svg%3e",E="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='48.542221mm'%20height='48.542221mm'%20viewBox='0%200%20172%20172'%20id='svg9132'%20version='1.1'%20inkscape:version='1.1.1%20(3bf5ae0d25,%202021-09-20)'%20sodipodi:docname='PointLibre.svg'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%20xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23'%20xmlns:cc='http://creativecommons.org/ns%23'%20xmlns:dc='http://purl.org/dc/elements/1.1/'%3e%3cdefs%20id='defs9134'%20/%3e%3csodipodi:namedview%20id='base'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageopacity='0.0'%20inkscape:pageshadow='2'%20inkscape:zoom='9.963663'%20inkscape:cx='91.733331'%20inkscape:cy='91.733331'%20inkscape:document-units='px'%20inkscape:current-layer='layer1'%20showgrid='false'%20fit-margin-top='0'%20fit-margin-left='0'%20fit-margin-right='0'%20fit-margin-bottom='0'%20inkscape:window-width='3840'%20inkscape:window-height='2066'%20inkscape:window-x='1609'%20inkscape:window-y='-11'%20inkscape:window-maximized='1'%20inkscape:pagecheckerboard='0'%20/%3e%3cmetadata%20id='metadata9137'%3e%3crdf:RDF%3e%3ccc:Work%20rdf:about=''%3e%3cdc:format%3eimage/svg+xml%3c/dc:format%3e%3cdc:type%20rdf:resource='http://purl.org/dc/dcmitype/StillImage'%20/%3e%3c/cc:Work%3e%3c/rdf:RDF%3e%3c/metadata%3e%3cg%20inkscape:label='Calque%201'%20inkscape:groupmode='layer'%20id='layer1'%20transform='translate(-396.85714,-289.21935)'%3e%3cpath%20id='rect1225'%20style='fill:red;stroke:red;stroke-width:0.9375;stroke-linecap:round;stroke-linejoin:round'%20d='m%20494.9404,357.8194%20-12.08391,12.08391%20-12.08392,-12.08391%20-5.12721,5.12721%2012.08391,12.08391%20-12.08391,12.08392%205.12721,5.12721%2012.08392,-12.08391%2012.08521,12.08521%205.12721,-5.12722%20-12.08521,-12.0852%2012.08392,-12.08392%20z'%20/%3e%3c/g%3e%3c/svg%3e",j="15/07/2024",H="Résoudre une grille de SquarO",N=!0,K="custom",X="e2024",Y={"fr-fr":["EN-SquarO"],"fr-ch":[]};class Q extends b{figure;figureCorrection;goodAnswers;nbSommets;longueur;largeur;blueButton;constructor(){super(),this.goodAnswers=[],this.nbSommets=[],this.typeExercice="simple",this.nbQuestions=1,this.nbQuestionsModifiable=!1,this.reponse="",this.exoCustomResultat=!0,this.besoinFormulaireTexte=["Longueur de la grille","Choisir un nombre entier entre 2 et 15."],this.besoinFormulaire2Texte=["Hauteur de la grille","Choisir un nombre entier entre 2 et 15."],this.besoinFormulaire3CaseACocher=["Aide sur le nombre total de points bleus"],this.besoinFormulaire4Texte=["Nombre de points bleus déjà affichés",`1 : Un seul point
2 : Deux points
3 : Trois points
4 : Le quart des points
5 : Le tiers des points
6 : La moitié des points
7 : Aucun`],this.sup=5,this.sup2=5,this.sup3=!0,this.sup4=7,this.longueur=this.sup,this.largeur=this.sup2}nouvelleVersion(){this.consigne="Cette grille de SquarO est à compléter en plaçant un certain nombre de points bleus dans les ronds vides qui sont sur les sommets des cases. ",this.consigne+="Le chiffre présent dans chaque case indique le nombre de points bleus qui l’entourent parmi les 4 sommets.",this.consigne+=this.interactif?"<br>Si vous le souhaitez, vous pouvez placer les points rouges en forme de croix pour signaler des positions impossibles des points bleus.":"",this.comment="Grâce au choix de la longueur et de la hauteur de la grille et grâce à l'aide ci-dessus sur des points initialement affichés, vous pouvez graduer la difficulté des grilles SquarO proposées.",this.longueur=Math.max(2,Math.min(parseInt(this.sup),15))||2,this.largeur=Math.max(2,Math.min(parseInt(this.sup2),15))||2,this.figure=new m({xMin:-.25,yMin:-.25,width:this.longueur*30+20,height:this.largeur*30+20,border:!1}),this.figure.create("Grid",{strokeWidthGrid:1,color:"black",yMin:0,yMax:this.largeur,xMax:this.longueur,xMin:0,axeX:!1,axeY:!1,labelX:!1,labelY:!1}),this.figure.snapGrid=!0,this.figure.options.color="blue",this.figure.options.shape="o",this.figure.options.labelIsVisible=!1,this.figure.setToolbar({tools:["DRAG","REMOVE"],position:"top"}),this.figureCorrection=new m({xMin:-.25,yMin:-.25,width:this.longueur*30+20,height:this.largeur*30+20,border:!1}),this.figureCorrection.create("Grid",{strokeWidthGrid:1,color:"black",yMin:0,yMax:this.largeur,xMax:this.longueur,xMin:0,axeX:!1,axeY:!1,labelX:!1,labelY:!1}),this.figureCorrection.snapGrid=!0,this.figureCorrection.options.color=w,this.figureCorrection.options.shape="o",this.figureCorrection.options.labelIsVisible=!1,this.figure.options.gridWithTwoPointsOnSamePosition=!1;const u=()=>{this.figure.options.shape="o",this.figure.options.color="blue",this.figure.ui?.send("POINT")},a=()=>{this.figure.options.shape="x",this.figure.options.color="red",this.figure.ui?.send("POINT")},l=()=>{for(const e of this.figure.elements.values())e.type==="Point"&&e instanceof A&&e.isVisible&&e.remove();this.figure.saveState(),setTimeout(()=>{this.blueButton!=null&&this.blueButton.click()},500)};this.blueButton=this.figure.addCustomButton({action:u,tooltip:"Placer un point bleu",userMessage:"Cliquer pour placer un point bleu",url:M}),this.figure.addCustomButton({action:a,tooltip:"Placer une croix rouge",userMessage:"Cliquer pour placer une croix rouge",url:E}),this.figure.addCustomButton({action:l,tooltip:"Effacer tous les points",url:C});const c=x({exercice:this,i:0,figure:this.figure});this.goodAnswers=[];const r=[];for(let e=0;e<=this.largeur;e++)for(let i=0;i<=this.longueur;i++){const t=k(0,1);r.push(t),t===0&&(this.goodAnswers.push({x:i,y:this.largeur-e}),this.figureCorrection.create("Point",{x:i,y:this.largeur-e}))}let n=`Cette grille doit contenir ${y(this.goodAnswers.length.toString(),"blue")} `;n+=this.goodAnswers.length===1?"point bleu.":"points bleus.",this.nbSommets=[];for(let e=0;e<this.largeur;e++)for(let i=0;i<this.longueur;i++){const t=4-(r[i+e*(this.longueur+1)]+r[i+1+e*(this.longueur+1)]+r[i+(e+1)*(this.longueur+1)]+r[i+1+(e+1)*(this.longueur+1)]);this.nbSommets.push(t),this.figure.create("TextByPosition",{anchor:"middleCenter",text:t.toString(),x:i+.5,y:this.largeur-e-.5}),this.figureCorrection.create("TextByPosition",{anchor:"middleCenter",text:t.toString(),x:i+.5,y:this.largeur-e-.5})}for(let e=0;e<=this.largeur;e++)for(let i=0;i<=this.longueur;i++){const t=this.figure.create("Point",{x:i,y:e,isVisible:!1,color:"white",isSelectable:!1});this.figure.create("Circle",{center:t,radius:.2,fillColor:"white",color:"black",fillOpacity:1,isSelectable:!1})}this.figure.elements.forEach(e=>{e instanceof P&&(e.isDeletable=!1)});let s=0;switch(this.sup4){case"1":case"2":case"3":s=parseInt(this.sup4);break;case"4":s=this.goodAnswers.length/4;break;case"5":s=this.goodAnswers.length/3;break;case"6":s=this.goodAnswers.length/2;break}let o=this.goodAnswers.slice();for(let e=0;e<s;e++){const i=v(o);this.figure.create("Point",{x:i.x,y:i.y,color:"blue"}),o=o.filter(t=>!(t.x===i.x&&t.y===i.y))}if(this.interactif){this.figure.divUserMessage.style.textAlign="left";const e=document.createElement("div"),i=document.createElement("div"),t=document.createElement("input");t.type="checkbox",t.id=`${this.numeroExercice}checkboxAide`,t.checked=!0,t.onchange=()=>{e.style.display=t.checked?"block":"none"};const d=document.createElement("label");d.htmlFor=`${this.numeroExercice}checkboxAide`,d.textContent="Afficher le nombre de points bleus présents sur la grille",d.classList.add("m-2"),i.classList.add("mt-4","text-coopmaths-struct"),e.classList.add("mt-4","text-coopmaths-struct"),this.figure.divFigureAndUserMessage.appendChild(i),i.appendChild(t),i.appendChild(d),this.figure.divFigureAndUserMessage.appendChild(e),this.figure.onChange(()=>{const h=[...this.figure.elements.values()].filter(f=>f.type==="Point"&&f.color==="blue").length;e.innerHTML=`Cette grille contient actuellement ${h} point${h===1?"":"s"} bleu${h===1?"":"s"}.`});const g=()=>{this.blueButton.click(),document.removeEventListener("exercicesAffiches",g)};document.addEventListener("exercicesAffiches",g)}else this.figure.isDynamic=!1,this.figure.divButtons.style.display="none",this.figure.divUserMessage.style.display="none";const p="Voici une solution possible :<br>";this.question=(this.sup3?n:"")+c,this.correction=p+this.figureCorrection.getStaticHtml()}correctionInteractive=()=>{this.answers==null&&(this.answers={}),this.answers[this.figure.id]=this.figure.json;const u=document.querySelector(`#feedbackEx${this.numeroExercice}Q0`);let a=!0,l=!0,c=0;for(let s=0;s<this.largeur;s++)for(let o=0;o<this.longueur;o++)l=(this.figure.checkCoords({x:o,y:this.largeur-s,color:"blue"}).isValid?1:0)+(this.figure.checkCoords({x:o,y:this.largeur-s-1,color:"blue"}).isValid?1:0)+(this.figure.checkCoords({x:o+1,y:this.largeur-s,color:"blue"}).isValid?1:0)+(this.figure.checkCoords({x:o+1,y:this.largeur-s-1,color:"blue"}).isValid?1:0)===this.nbSommets[o+s*this.longueur],l&&c++,a&&=l;this.figure.isDynamic=!1,this.figure.divButtons.style.display="none",this.figure.divUserMessage.style.display="none",this.figure.buttons.get("SHAKE")?.click();const r=[...this.figure.elements.values()].filter(s=>s.type!=="pointer"&&s.type==="Point"&&s.color==="blue").length;a&&=r===this.goodAnswers.length;let n;return a?(u.innerHTML="Bravo !",["OK"]):(r===this.goodAnswers.length?n="Le nombre de points placés est correct mais "+(c===1?"seul 1 est bien placé.":`seuls ${c} sont bien placés.`):r>this.goodAnswers.length?n="Le nombre de points placés est trop important par rapport à ce qui est attendu.":n="Le nombre de points placés n'est pas assez important par rapport à ce qui est attendu.",u.innerHTML=n,["KO"])}}export{j as dateDePublication,Q as default,N as interactifReady,K as interactifType,Y as refs,H as titre,X as uuid};

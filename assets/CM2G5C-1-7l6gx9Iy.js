import{af as I,y as te,r as Q,a as A,o as M,D as E,c as re,l as ie,dH as $,ct as ne,C as oe}from"./embellissements-BYV7mIDn.js";import{E as ae}from"./Exercice-DtXhjCyI.js";import{e as _}from"./Canvas3DElement-BqpJ_f1x.js";import{G as w,B as ce,d as ue,e as le,a as N,E as H,f as z,V as me}from"./three.module-6qJVdblD.js";import{a as fe}from"./gestionInteractif-DujZpSu8.js";import"mathjs";import"decimal.js";import"katex";import"earcut";import"roughjs";import"./exerciseMethods-CtbYPwln.js";import"./index-BUDQz6-w.js";import"crypto-js";import"seedrandom";import"./comparisonFunctions-B45ZZ3C7.js";import"./compute-engine.min.umd-BwAhpA7x.js";import"./Hms-u2AUyU1C.js";import"./ListeDeroulanteElement-CXmzV-cr.js";import"./tableauMathlive-xx-nDjq0.js";import"./canStore-DaSrd7sp.js";import"./generalStore-C3E9FHtR.js";import"./sizeTools-DfTC1Dgv.js";import"./time-DMC-jnVL.js";const Fe=[[[{numero:0,isFace:!1},{numero:1,isFace:!0},{numero:0,isFace:!1}],[{numero:2,isFace:!0},{numero:3,isFace:!0},{numero:4,isFace:!0}],[{numero:0,isFace:!1},{numero:5,isFace:!0},{numero:0,isFace:!1}],[{numero:0,isFace:!1},{numero:6,isFace:!0},{numero:0,isFace:!1}]],[[{numero:0,isFace:!1},{numero:1,isFace:!0},{numero:0,isFace:!1}],[{numero:0,isFace:!1},{numero:2,isFace:!0},{numero:3,isFace:!0}],[{numero:4,isFace:!0},{numero:5,isFace:!0},{numero:0,isFace:!1}],[{numero:0,isFace:!1},{numero:6,isFace:!0},{numero:0,isFace:!1}]],[[{numero:1,isFace:!0},{numero:2,isFace:!0},{numero:0,isFace:!1}],[{numero:0,isFace:!1},{numero:3,isFace:!0},{numero:4,isFace:!0}],[{numero:0,isFace:!1},{numero:5,isFace:!0},{numero:0,isFace:!1}],[{numero:0,isFace:!1},{numero:6,isFace:!0},{numero:0,isFace:!1}]],[[{numero:1,isFace:!0},{numero:2,isFace:!0},{numero:0,isFace:!1}],[{numero:0,isFace:!1},{numero:3,isFace:!0},{numero:0,isFace:!1}],[{numero:0,isFace:!1},{numero:4,isFace:!0},{numero:5,isFace:!0}],[{numero:0,isFace:!1},{numero:6,isFace:!0},{numero:0,isFace:!1}]],[[{numero:1,isFace:!0},{numero:0,isFace:!1},{numero:0,isFace:!1}],[{numero:2,isFace:!0},{numero:3,isFace:!0},{numero:4,isFace:!0}],[{numero:0,isFace:!1},{numero:5,isFace:!0},{numero:0,isFace:!1}],[{numero:0,isFace:!1},{numero:6,isFace:!0},{numero:0,isFace:!1}]],[[{numero:0,isFace:!1},{numero:1,isFace:!0},{numero:0,isFace:!1}],[{numero:0,isFace:!1},{numero:2,isFace:!0},{numero:3,isFace:!0}],[{numero:4,isFace:!0},{numero:5,isFace:!0},{numero:0,isFace:!1}],[{numero:6,isFace:!0},{numero:0,isFace:!1},{numero:0,isFace:!1}]],[[{numero:1,isFace:!0},{numero:2,isFace:!0},{numero:3,isFace:!0}],[{numero:0,isFace:!1},{numero:4,isFace:!0},{numero:0,isFace:!1}],[{numero:0,isFace:!1},{numero:5,isFace:!0},{numero:0,isFace:!1}],[{numero:0,isFace:!1},{numero:6,isFace:!0},{numero:0,isFace:!1}]],[[{numero:0,isFace:!1},{numero:1,isFace:!0},{numero:2,isFace:!0}],[{numero:0,isFace:!1},{numero:3,isFace:!0},{numero:0,isFace:!1}],[{numero:0,isFace:!1},{numero:4,isFace:!0},{numero:0,isFace:!1}],[{numero:5,isFace:!0},{numero:6,isFace:!0},{numero:0,isFace:!1}]],[[{numero:0,isFace:!1},{numero:1,isFace:!0},{numero:2,isFace:!0}],[{numero:0,isFace:!1},{numero:3,isFace:!0},{numero:0,isFace:!1}],[{numero:4,isFace:!0},{numero:5,isFace:!0},{numero:0,isFace:!1}],[{numero:6,isFace:!0},{numero:0,isFace:!1},{numero:0,isFace:!1}]],[[{numero:1,isFace:!0},{numero:0,isFace:!1}],[{numero:2,isFace:!0},{numero:0,isFace:!1}],[{numero:3,isFace:!0},{numero:4,isFace:!0}],[{numero:0,isFace:!1},{numero:5,isFace:!0}],[{numero:0,isFace:!1},{numero:6,isFace:!0}]],[[{numero:0,isFace:!1},{numero:0,isFace:!1},{numero:1,isFace:!0}],[{numero:0,isFace:!1},{numero:2,isFace:!0},{numero:3,isFace:!0}],[{numero:4,isFace:!0},{numero:5,isFace:!0},{numero:0,isFace:!1}],[{numero:6,isFace:!0},{numero:0,isFace:!1},{numero:0,isFace:!1}]]],he=[[[{numero:1,isFace:!0,collision:6},{numero:0,isFace:!1}],[{numero:2,isFace:!0},{numero:0,isFace:!1}],[{numero:3,isFace:!0},{numero:4,isFace:!0}],[{numero:5,isFace:!0},{numero:0,isFace:!1}],[{numero:6,isFace:!0},{numero:0,isFace:!1}]],[[{numero:1,isFace:!0},{numero:0,isFace:!1},{numero:0,isFace:!1}],[{numero:2,isFace:!0},{numero:3,isFace:!0},{numero:4,isFace:!0,collision:6}],[{numero:5,isFace:!0},{numero:0,isFace:!1},{numero:0,isFace:!1}],[{numero:6,isFace:!0},{numero:0,isFace:!1},{numero:0,isFace:!1}]],[[{numero:1,isFace:!0,collision:6},{numero:0,isFace:!1}],[{numero:2,isFace:!0},{numero:3,isFace:!0}],[{numero:4,isFace:!0},{numero:0,isFace:!1}],[{numero:5,isFace:!0},{numero:0,isFace:!1}],[{numero:6,isFace:!0},{numero:0,isFace:!1}]],[[{numero:1,isFace:!0},{numero:2,isFace:!0,collision:5}],[{numero:3,isFace:!0},{numero:0,isFace:!1}],[{numero:4,isFace:!0},{numero:5,isFace:!0}],[{numero:6,isFace:!0},{numero:0,isFace:!1}]],[[{numero:1,isFace:!0,collision:2},{numero:0,isFace:!1},{numero:2,isFace:!0}],[{numero:3,isFace:!0},{numero:4,isFace:!0},{numero:5,isFace:!0}],[{numero:0,isFace:!1},{numero:6,isFace:!0},{numero:0,isFace:!1}]],[[{numero:0,isFace:!1},{numero:1,isFace:!0},{numero:0,isFace:!1}],[{numero:2,isFace:!0},{numero:3,isFace:!0},{numero:4,isFace:!0,collision:6}],[{numero:5,isFace:!0},{numero:0,isFace:!1},{numero:0,isFace:!1}],[{numero:6,isFace:!0},{numero:0,isFace:!1},{numero:0,isFace:!1}]],[[{numero:1,isFace:!0,collision:5},{numero:2,isFace:!0},{numero:3,isFace:!0}],[{numero:0,isFace:!1},{numero:4,isFace:!0},{numero:0,isFace:!1}],[{numero:5,isFace:!0},{numero:6,isFace:!0},{numero:0,isFace:!1}]],[[{numero:1,isFace:!0,collision:5}],[{numero:2,isFace:!0,collision:6}],[{numero:3,isFace:!0}],[{numero:4,isFace:!0}],[{numero:5,isFace:!0}],[{numero:6,isFace:!0}]],[[{numero:1,isFace:!0,collision:6},{numero:2,isFace:!0}],[{numero:3,isFace:!0},{numero:0,isFace:!1}],[{numero:4,isFace:!0},{numero:0,isFace:!1}],[{numero:5,isFace:!0},{numero:0,isFace:!1}],[{numero:6,isFace:!0},{numero:0,isFace:!1}]],[[{numero:1,isFace:!0},{numero:2,isFace:!0,collision:6}],[{numero:3,isFace:!0},{numero:0,isFace:!1}],[{numero:4,isFace:!0},{numero:0,isFace:!1}],[{numero:5,isFace:!0},{numero:6,isFace:!0}]],[[{numero:0,isFace:!1},{numero:1,isFace:!0,collision:6}],[{numero:2,isFace:!0},{numero:3,isFace:!0}],[{numero:4,isFace:!0},{numero:0,isFace:!1}],[{numero:5,isFace:!0},{numero:0,isFace:!1}],[{numero:6,isFace:!0},{numero:0,isFace:!1}]],[[{numero:1,isFace:!0},{numero:2,isFace:!0},{numero:3,isFace:!0,collision:6}],[{numero:4,isFace:!0},{numero:0,isFace:!1},{numero:0,isFace:!1}],[{numero:5,isFace:!0},{numero:0,isFace:!1},{numero:0,isFace:!1}],[{numero:6,isFace:!0},{numero:0,isFace:!1},{numero:0,isFace:!1}]],[[{numero:1,isFace:!0},{numero:2,isFace:!0,collision:5}],[{numero:3,isFace:!0},{numero:0,isFace:!1}],[{numero:4,isFace:!0},{numero:5,isFace:!0}],[{numero:0,isFace:!1},{numero:6,isFace:!0}]],[[{numero:1,isFace:!0},{numero:2,isFace:!0},{numero:3,isFace:!0,collision:6}],[{numero:4,isFace:!0,collision:5},{numero:0,isFace:!1},{numero:5,isFace:!0}],[{numero:6,isFace:!0},{numero:0,isFace:!1},{numero:0,isFace:!1}]],[[{numero:0,isFace:!1},{numero:0,isFace:!1},{numero:1,isFace:!0}],[{numero:2,isFace:!0},{numero:3,isFace:!0},{numero:4,isFace:!0,collision:6}],[{numero:5,isFace:!0},{numero:0,isFace:!1},{numero:0,isFace:!1}],[{numero:6,isFace:!0},{numero:0,isFace:!1},{numero:0,isFace:!1}]],[[{numero:0,isFace:!1},{numero:1,isFace:!0},{numero:2,isFace:!0,collision:6}],[{numero:3,isFace:!0},{numero:4,isFace:!0},{numero:0,isFace:!1}],[{numero:5,isFace:!0},{numero:0,isFace:!1},{numero:0,isFace:!1}],[{numero:6,isFace:!0},{numero:0,isFace:!1},{numero:0,isFace:!1}]]];function Z(o,s,t){return[{dx:0,dy:-1,dir:"T"},{dx:0,dy:1,dir:"B"},{dx:-1,dy:0,dir:"L"},{dx:1,dy:0,dir:"R"}].filter(({dx:r,dy:e})=>o[t+e]?.[s+r]?.isFace).map(({dx:r,dy:e,dir:c})=>({x:s+r,y:t+e,dir:c}))}function pe(o){let s=-1,t={x:0,y:0};for(let i=0;i<o.length;i++)for(let r=0;r<o[0].length;r++)if(o[i][r].isFace){const e=Z(o,r,i);e.length>s&&(s=e.length,t={x:r,y:i})}return t}function K(o,s,t,i,r,e=new Set){const c=`${s},${t}`;if(e.has(c))return null;e.add(c);const a={x:s,y:t,parent:i,children:[],directionFromParent:r};for(const n of Z(o,s,t))if(!e.has(`${n.x},${n.y}`)){Math.abs(n.x-s)+Math.abs(n.y-t)!==1&&console.warn(`Parent (${s},${t}) et enfant (${n.x},${n.y}) ne sont pas adjacents !`);const u=K(o,n.x,n.y,a,n.dir,e);u&&a.children.push(u)}return a}const R=.001;function W(o,s,t=[0,0,0],i=new Map){const r=`${o.x},${o.y}`;i.set(r,t);for(const e of o.children){let c=[0,0,0];switch(e.directionFromParent){case"T":c=[0,0,-1.501];break;case"B":c=[0,0,s+R];break;case"L":c=[-1.501,0,0];break;case"R":c=[s+R,0,0];break}W(e,s,[t[0]+c[0],t[1]+c[1],t[2]+c[2]],i)}return i}function X(o,s,t,i){const r=`${o.x},${o.y}`,e=t.get(r)??[0,0,0];let c;if(!o.parent)c=e;else{const a=`${o.parent.x},${o.parent.y}`,n=t.get(a)??[0,0,0];c=[(n[0]+e[0])/2,(n[1]+e[1])/2,(n[2]+e[2])/2]}i.set(r,c);for(const a of o.children)X(a,s,t,i);return i}function Y(o,s,t,i,r,e={value:0}){const a=s-.004,n=s-2*.002,u=e.value%r.length;e.value++;const m=r[u],l=`${o.x},${o.y}`,d=t.get(l)??[0,0,0],F=i.get(l)??[0,0,0],f=o.parent?i.get(`${o.parent.x},${o.parent.y}`)??[0,0,0]:[0,0,0],p=new w;o.parent&&o.directionFromParent&&(p.userData.directionFromParent=o.directionFromParent),o.parent&&o.directionFromParent?p.position.set(F[0]-f[0],F[1]-f[1],F[2]-f[2]):p.position.set(d[0],d[1],d[2]);const P=new ce(a,.01,n),h=new ue({color:m,side:le}),y=new N(P,h);o.parent&&o.directionFromParent?y.position.set(d[0]-F[0],d[1]-F[1],d[2]-F[2]):y.position.set(0,0,0),p.add(y);for(const g of o.children){const C=Y(g,s,t,i,r,e);p.add(C)}return p}function G(o,s){const t=pe(o),i=1.5,r=K(o,t.x,t.y),e=W(r,i,[t.x,0,t.y],new Map),c=X(r,i,e,new Map),n=Y(r,i,e,c,["#3498db","#2ecc71","#e67e22","#9b59b6","#f1c40f","#5dade2"]);return n.traverse(m=>m.updateMatrix()),{type:"group",object:n.toJSON()}}function de(){return{pliageEnCours:!1,depliageEnCours:!1,estPlie:!1,estDeplie:!0,blinkEnCours:!1}}function ge(o,s,t){o._etatPatron=de();const i=o.querySelector(`#btnPlier-${t}`),r=o.querySelector(`#btnDeplier-${t}`);i&&(i.disabled=!1),r&&(r.disabled=!0),o.addEventListener(`pliage-${t}`,()=>{const e=o._etatPatron;!e.estDeplie||e.pliageEnCours||(e.pliageEnCours=!0,e.estDeplie=!1,i.disabled=!0,r.disabled=!0,xe(s,()=>{e.pliageEnCours=!1,e.estPlie=!0;let c=!1;const a=[];s.traverse(u=>{u instanceof N&&a.push(u)});const n=[];for(let u=0;u<a.length;u++){const m=new z().setFromObject(a[u]);for(let l=u+1;l<a.length;l++){const d=new z().setFromObject(a[l]),F=m.clone();F.intersect(d);const f=F.getSize(new me);f.x*f.y*f.z>.01&&(c=!0,n.push(a[u],a[l]))}}if(c){e.blinkEnCours=!0,r.disabled=!0;let u=n.length;n.forEach(m=>{$e(m,"#ff0000",7,200,()=>{u--,u===0&&(e.blinkEnCours=!1,r.disabled=!1)})})}else r.disabled=!1}))}),o.addEventListener(`depliage-${t}`,()=>{const e=o._etatPatron;!e.estPlie||e.depliageEnCours||e.blinkEnCours||(e.depliageEnCours=!0,e.estPlie=!1,r.disabled=!0,i.disabled=!0,be(s,()=>{e.depliageEnCours=!1,e.estDeplie=!0,i.disabled=!1}))})}function xe(o,s,t=1e3){const i=[];o.traverse(e=>{e instanceof w&&e.userData.directionFromParent&&i.push(e)});let r=i.length;i.forEach(e=>{const c=e.rotation.clone(),a=new H;switch(e.userData.directionFromParent){case"T":a.set(Math.PI/2,0,0);break;case"B":a.set(-Math.PI/2,0,0);break;case"L":a.set(0,0,-Math.PI/2);break;case"R":a.set(0,0,Math.PI/2);break}ee(e,c,a,t,()=>{r--,r===0&&s&&s()})})}function be(o,s,t=1e3){const i=[];o.traverse(e=>{e instanceof w&&e.userData.directionFromParent&&i.push(e)});let r=i.length;i.forEach(e=>{const c=e.rotation.clone(),a=new H(0,0,0);ee(e,c,a,t,()=>{r--,r===0&&s&&s()})})}function U(){document.querySelectorAll("canvas-3d").forEach(s=>{const i=(s.getAttribute("id")||"").match(/Ex\d+Q\d+/),r=i?i[0]:"",e=s.objects,c=Array.isArray(e)?e.find(a=>a instanceof w):void 0;c&&r&&ge(s,c,r)}),document.removeEventListener("correctionsAffichees",U)}function ee(o,s,t,i,r){const e=performance.now();function c(a){const n=Math.min((a-e)/i,1);o.rotation.set(s.x+(t.x-s.x)*n,s.y+(t.y-s.y)*n,s.z+(t.z-s.z)*n),n<1?requestAnimationFrame(c):(o.rotation.copy(t),r&&r())}requestAnimationFrame(c)}function $e(o,s="#ff0000",t=26,i=200,r){let e=0;const c=o.material;if(!c.color)return r&&r(),()=>{};const a=c.color.clone();function n(){c.color&&c.color.set(e%2===0?s:"#ffffff"),e++,e<t*2?setTimeout(n,i):(c.color&&c.color.copy(a),r&&r())}n()}const Ne=!0,He="qcmMono",Ze=!0,Ke="cliqueFigure",We="Choisir le patron de cube",Xe="18/07/2025",Ye="f57fe",Ue={"fr-fr":["CM2G5C-1"],"fr-2016":["6G45"],"fr-ch":[]};function k(o){const s=o.findIndex(r=>r.flat().filter(e=>e.isFace).length===6&&r.flat().filter(e=>e.collision!==void 0).length===0),t=o.findIndex(r=>r.flat().filter(e=>e.isFace).length!==6),i=o.map((r,e)=>{const c=r.flat().reduce((a,n)=>(n.collision!==void 0&&a.push([e,n.collision]),a),[]);return{index:e,collision:c}}).filter(r=>r.collision.length>0);if(i.length===0)throw new Error("Aucun faux patron trouvé dans la liste fournie.");return{indexVraiPatron:s,indexPas6Faces:t,indexFauxPatrons:i}}class es extends ae{listeMatrices;listeners;constructor(){super(),this.nbQuestions=1,this.besoinFormulaire2CaseACocher=["3d dynamique",!0],this.sup2=!0,this.listeMatrices=[],this.listeners=[]}nouvelleVersion(){this.figures=[],this.consigne="Parmi les dessins suivants, lequel est un patron de cube ? <br>",this.consigne+=this.interactif?"Cliquer sur":"Entourer",this.consigne+=" la bonne figure.";const s=.4,t=.3,r=I(["type1"],this.nbQuestions),e=I(["1","2","3","4","5","6","7","8","9","10","11"],this.nbQuestions),c=J(Fe),a=J(he);for(let n=0,u=0;n<this.nbQuestions&&u<50;){let m="",l="";const d=te([0,1,2,3]),F=[],f=[];switch(this.listeMatrices[n]=[],r[n]){case"type1":{m="",F.push(c[Number(e[n])-1]);const p=Q(0,a.length-1);F.push(a[Q(0,p)]),F.push(a[Q(0,a.length-1,p)]);const P=A([5,7]);F.push(Ee(P));for(let x=0;x<4;x++)F[x].braceMatrice(),f[x]=F[d[x]],this.listeMatrices[n][x]=F[d[x]].matrice;const h=k(this.listeMatrices[n]).indexVraiPatron,y=k(this.listeMatrices[n]).indexPas6Faces,g=k(this.listeMatrices[n]).indexFauxPatrons,C=f[0].dessineMatrice({numeroterFaces:!1,numeroDessin:0}),D=f[1].dessineMatrice({numeroterFaces:!1,numeroDessin:1}),q=f[2].dessineMatrice({numeroterFaces:!1,numeroDessin:2}),L=f[3].dessineMatrice({numeroterFaces:!1,numeroDessin:3}),S=M(Object.assign({style:"display: inline-block",scale:t,id:`cliquefigure0Ex${this.numeroExercice}Q${n}`},E(C)),C),j=M(Object.assign({style:"display: inline-block",scale:t,id:`cliquefigure1Ex${this.numeroExercice}Q${n}`},E(D)),D),T=M(Object.assign({style:"display: inline-block",scale:t,id:`cliquefigure2Ex${this.numeroExercice}Q${n}`},E(q)),q),B=M(Object.assign({style:"display: inline-block",scale:t,id:`cliquefigure3Ex${this.numeroExercice}Q${n}`},E(L)),L);this.autoCorrection[n]={},this.autoCorrection[n].enonce=this.consigne+m,this.autoCorrection[n].propositions=[{texte:S,statut:h===0},{texte:j,statut:h===1},{texte:T,statut:h===2},{texte:B,statut:h===3}],this.autoCorrection[n].options={ordered:!0,lastChoice:4},fe(this.autoCorrection[n]),this.figures[n]=[{id:`cliquefigure0Ex${this.numeroExercice}Q${n}`,solution:h===0},{id:`cliquefigure1Ex${this.numeroExercice}Q${n}`,solution:h===1},{id:`cliquefigure2Ex${this.numeroExercice}Q${n}`,solution:h===2},{id:`cliquefigure3Ex${this.numeroExercice}Q${n}`,solution:h===3}];const se=[S,j,T,B];{m+=se.join("")+"<br><br>",this.interactif&&re.isHtml&&(m+=`<span id="resultatCheckEx${this.numeroExercice}Q${n}"></span>`),l="Procédons par élimination:<br>",l+=`- Le dessin ${y+1} contient ${P} faces au lieu de 6 faces.<br><br>`,l+=`- Le dessin ${g[0].index+1} poséde des faces qui vont se superposer :<br>`;const x=f[g[0].index].dessineMatrice({numeroterFaces:!0,numeroDessin:g[0].index});l+=M(Object.assign({style:"display: inline-block",scale:s,id:`correction0Ex${this.numeroExercice}Q${n}`},E(x)),x)+"<br>",l+=f[g[0].index].ecritFacesQuiSeSuperposent()+"<br><br>",l+=`- Le dessin ${g[1].index+1} poséde des faces qui vont se superposer :<br>`;const O=f[g[1].index].dessineMatrice({numeroterFaces:!0,numeroDessin:g[1].index});l+=M(Object.assign({style:"display: inline-block",scale:s,id:`correction1Ex${this.numeroExercice}Q${n}`},E(O)),O)+"<br>",l+=f[g[1].index].ecritFacesQuiSeSuperposent()+"<br><br>",l+=`Le dessin ${h+1} posséde 6 faces qui ne vont pas se superposer en le pliant, c'est donc le dessin d'un patron.<br>`;const V=f[h].dessineMatrice({numeroterFaces:!0,numeroDessin:h});l+=M(Object.assign({style:"display: inline-block",scale:s,id:`correction2Ex${this.numeroExercice}Q${n}`},E(V)),V)+"<br><br>"}}break;case"type2":m=`Question ${n+1} de type 2`,l=`Correction ${n+1} de type 2`;break;case"type3":m=`Question ${n+1} de type 3`,l=`Correction ${n+1} de type 3`;break}if(this.questionJamaisPosee(n,m)){if(this.sup2){const p=k(this.listeMatrices[n]).indexVraiPatron,y={objects:[G(this.listeMatrices[n][p],`patron3dEx${this.numeroExercice}Q${n}`),{type:"ambientLight",color:16777215},{type:"directionalLight",color:16777215,position:[8,8,8]},{type:"canvas3dButton",id:`btnPlier-Ex${this.numeroExercice}Q${n}`,text:"Plier",position:{left:"10px",bottom:"10px"},onClick:`pliage-Ex${this.numeroExercice}Q${n}`},{type:"canvas3dButton",id:`btnDeplier-Ex${this.numeroExercice}Q${n}`,text:"Déplier",position:{left:"90px",bottom:"10px"},onClick:`depliage-Ex${this.numeroExercice}Q${n}`}],autoCenterZoomMargin:1};l+=_({id:`canvas3dEx${this.numeroExercice}Q${n}`,content:y,width:200,height:200})}this.listeQuestions[n]=m,this.listeCorrections[n]=l??"",n++}u++}ie(this),document.addEventListener("correctionsAffichees",U,{once:!0})}callback(s,t){if("listeMatrices"in s&&Array.isArray(s.listeMatrices)&&s.listeMatrices.length>=t){const i=Array.from(document.querySelectorAll(`[id^="cliquefigure"][id$="Ex${s.numeroExercice}Q${t}"]`)).filter(u=>new RegExp(`^cliquefigure\\dEx${s.numeroExercice}Q${t}$`).test(u.id));let r=Array.from(i).findIndex(u=>!!u.etat);r===-1&&Array.isArray(s.autoCorrection[t].propositions)&&(r=k(s.listeMatrices[t]).indexVraiPatron);const a={objects:[G(s.listeMatrices[t][r],`patron3dEx${s.numeroExercice}Q${t}`),{type:"ambientLight",color:16777215},{type:"directionalLight",color:16777215,position:[8,8,8]},{type:"canvas3dButton",id:`btnPlier-Ex${s.numeroExercice}Q${t}`,text:"Plier",position:{left:"10px",bottom:"10px"},onClick:`pliage-Ex${s.numeroExercice}Q${t}`},{type:"canvas3dButton",id:`btnDeplier-Ex${s.numeroExercice}Q${t}`,text:"Déplier",position:{left:"90px",bottom:"10px"},onClick:`depliage-Ex${s.numeroExercice}Q${t}`}],autoCenterZoomMargin:1.2},n=_({id:`canvas3dEx${s.numeroExercice}Q${t}`,content:a,width:200,height:200});s.listeCorrections[t]=s.listeCorrections[t].replace(/<canvas-3d[^>]*>.*?<\/canvas-3d>/s,n)}}}const v=1;function J(o){const s=[];for(const t of o){const i=new b(t[0].length,t.length);i.matrice=t.map(r=>[...r]),s.push(i)}return s}function Ee(o){const s=new ye;return s.faitUnPatron(o),s.faitUnPatronMatrice(),s.matrice}class b{matrice=[];constructor(s,t,i=0,r=!1){for(let e=0;e<t;e++){this.matrice[e]=[];for(let c=0;c<s;c++)this.matrice[e][c]={numero:i,isFace:r}}}get larg(){return this.matrice.reduce((s,t)=>Math.max(s,t.length),0)}get long(){return this.matrice.length}initMatrice(s,t,i=0,r=!1){for(let e=0;e<t;e++){this.matrice[e]=[];for(let c=0;c<s;c++)this.matrice[e][c]={numero:i,isFace:r}}}setcell(s,t,i,r){t<this.long&&s<this.larg&&(this.matrice[t][s]={numero:i,isFace:r})}dimensions(){return[this.larg,this.long]}ecritMatrice(){let s=`[
`;const t=this.matrice.map(i=>i.map(r=>r.isFace?1:0));return s+=t.map(i=>`[${i.join(", ")}]`).join(`,
`),s+=`]
`,s}braceMatrice(){const[s,t]=[this.larg,this.long],i=new b(s,t);i.matrice=$(this.matrice);let r=A([1,2,3,3,0]);switch(r){case 1:i.symetrieMatriceH();break;case 2:i.symetrieMatriceV();break;case 3:i.symetrieMatriceD();break}switch(r=A([1,1,2,3,3,3,3,0]),r){case 1:i.rotationMatrice90p();break;case 2:i.rotationMatrice90n();break;case 3:i.rotationMatrice180();break}this.matrice=$(i.matrice)}ecritFacesQuiSeSuperposent(){let s="";for(let t=0;t<this.long;t++)for(let i=0;i<this.larg;i++)this.matrice[t][i].isFace&&this.matrice[t][i].collision&&(s+=` Les faces ${this.matrice[t][i].numero} et  ${this.matrice[t][i].collision} vont se superposer.`);return s}dessineMatrice({numeroterFaces:s,numeroDessin:t}){const i=s??!1,r=[];for(let a=0;a<this.long;a++)for(let n=0;n<this.larg;n++)if(this.matrice[a][n].isFace){const u=new ne({xMin:a*v,yMin:n*v,xMax:(a+1)*v,yMax:(n+1)*v});i&&u.addTextIn({textIn:`${this.matrice[a][n].numero}`});const m=u.render();r.push(m)}const{xmin:e,xmax:c}=E(r);if(t!==void 0&&typeof t=="number"){const a=oe(`Dessin ${t+1}`,(e+c)/2,-.5,0,"black",1,"milieu",!1,1);r.push(a)}return r}symetrieMatriceH(){const[s,t]=[this.larg,this.long],i=new b(s,t);for(let r=0;r<t;r++)for(let e=0;e<s;e++)i.matrice[t-1-r][e]=this.matrice[r][e];this.matrice=$(i.matrice)}symetrieMatriceV(){const[s,t]=[this.larg,this.long],i=new b(s,t);for(let r=0;r<t;r++)for(let e=0;e<s;e++)i.matrice[r][s-1-e]=this.matrice[r][e];this.matrice=$(i.matrice)}symetrieMatriceD(){const[s,t]=[this.larg,this.long],i=new b(t,s);for(let r=0;r<t;r++)for(let e=0;e<s;e++)i.matrice[e][r]=this.matrice[r][e];this.matrice=$(i.matrice)}rotationMatrice90p(){const[s,t]=[this.long,this.larg],i=new b(s,t);for(let r=0;r<t;r++)for(let e=0;e<s;e++)i.matrice[r][s-e-1]=this.matrice[e][r];this.matrice=$(i.matrice)}rotationMatrice90n(){const[s,t]=[this.long,this.larg],i=new b(s,t);for(let r=0;r<t;r++)for(let e=0;e<s;e++)i.matrice[t-r-1][e]=this.matrice[e][r];this.matrice=$(i.matrice)}rotationMatrice180(){const[s,t]=[this.larg,this.long],i=new b(s,t);for(let r=0;r<t;r++)for(let e=0;e<s;e++)i.matrice[t-1-r][s-1-e]=this.matrice[r][e];this.matrice=$(i.matrice)}}class ye{_couples=[];_matrice=new b(0,0);constructor(){this._couples=[[0,0],[1,0]]}get couples(){return this._couples}get matrice(){return this._matrice}set couples(s){}ecritCouples(){return this._couples.map(([s,t])=>`[${s}, ${t}]`).join("; ")}ecritlongueur(){return this._couples.length}faitUnPatron(s=6){const t=[-1,1],i=this._couples.length;for(let r=0;r<s-i;r++){const e=[];for(let c=0;c<this._couples.length;c++){const[a,n]=this._couples[c];for(const u of t)this._couples.some(([m,l])=>m===a+u&&(l===n||l===n+1||l===n-1))||e.push([a+u,n]);for(const u of t)this._couples.some(([m,l])=>l===n+u&&(m===a||m===a+1||m===a-1))||e.push([a,n+u])}this._couples.push(e[Q(0,e.length-1)])}}faitUnPatronMatrice(){let s=0,t=0,i=0,r=0;for(const[a,n]of this._couples)i=Math.max(i,a),r=Math.max(r,n),s=Math.min(s,a),t=Math.min(t,n);const e=i-s+1,c=r-t+1;this._matrice.initMatrice(e,c);for(const[a,n]of this._couples)this._matrice.setcell(a-s,r-n,1,!0)}}export{Ne as amcReady,He as amcType,Xe as dateDePublication,es as default,Ze as interactifReady,Ke as interactifType,Ue as refs,We as titre,Ye as uuid};

import{max as L}from"mathjs";import{O as q,ad as $,A as B,p as d,ae as I,I as z,C as A,D as X,T as st,E as et,af as it,M as Z,a4 as w,a3 as y,ag as ot,ah as rt,N as lt,ab as N,ai as Y,e as E,aj as _,W as P,k as at,ak as ht}from"./embellissements-BYV7mIDn.js";import{a as F}from"./style-CcGLZIPY.js";import{p as nt,l as ct,a as ut}from"./reperes-WwrVcExd.js";class bt extends q{constructor(t,s,{couleurDesPoints:i="red",couleurDuTrait:e="blue",styleDuTrait:a="",epaisseurDuTrait:o=2,styleDesPoints:r="x",tailleDesPoints:h=3}){super(),this.objets=[];const n=[];for(const[f,c]of t){const j=nt(f,c,s);n.push(j);const k=st(j,i);k.style=r,k.taille=h,this.objets.push(k)}const u=et(...n);u.epaisseur=o,u.color=z(e),a==="pointilles"&&(u.pointilles=5),this.objets.push(u),this.bordures=s.bordures}svg(t){let s="";if(this.objets==null)return s;for(const i of this.objets)s+=`
	`+i.svg(t);return s}tikz(){let t="";if(this.objets==null)return t;for(const s of this.objets)t+=`
	`+s.tikz();return t}svgml(t,s){let i="";if(this.objets==null)return i;for(const e of this.objets)typeof e.svgml>"u"?i+=`
	`+e.svg(t):i+=`
	`+e.svgml(t,s);return i}tikzml(t){let s="";if(this.objets==null)return s;for(const i of this.objets)typeof i.tikzml>"u"?s+=`
	`+i.tikz():s+=`
	`+i.tikzml(t);return s}}function zt(p,t,{couleurDesPoints:s="red",couleurDuTrait:i="blue",styleDuTrait:e="",epaisseurDuTrait:a=2,styleDesPoints:o="x",tailleDesPoints:r=3}){return new bt(p,t,{couleurDesPoints:s,couleurDuTrait:i,styleDuTrait:e,epaisseurDuTrait:a,styleDesPoints:o,tailleDesPoints:r})}class pt extends q{p;texte;constructor(t,s,i="",{epaisseur:e=.6,couleurDeRemplissage:a="blue",color:o="black",opaciteDeRemplissage:r=.3,angle:h=66,unite:n=1,hachures:u=!1}){super(),this.p=s===0?$(t,0):B([d(t-e/2,0),d(t-e/2,s*n),d(t+e/2,s*n),d(t+e/2,0)]),this.p instanceof I&&(this.p.couleurDeRemplissage=z(a),this.p.opaciteDeRemplissage=r,this.p.color=z(o),u&&(this.p.hachures=u));let f;this.texte=A(i,t,-.2,h,"black",1,"gauche"),this.p instanceof I?f=X([this.p,this.texte],{rxmin:0,rxmax:0,rymin:0,rymax:0}):f=X([this.texte],{rxmin:0,rxmax:0,rymin:0,rymax:0}),this.bordures=[f.xmin,f.ymin,f.xmax,f.ymax]}tikz(){return this.p.tikz()+`
`+this.texte.tikz()}svg(t){return this.p.svg(t)+`
`+this.texte.svg(t)}}function ft(p,t,s="",{epaisseur:i=.6,couleurDeRemplissage:e="blue",color:a="black",opaciteDeRemplissage:o=.3,angle:r=66,unite:h=1,hachures:n=!1}){return new pt(p,t,s,{epaisseur:i,couleurDeRemplissage:e,color:a,opaciteDeRemplissage:o,angle:r,unite:h,hachures:n})}class dt extends q{p;texte;constructor(t,s,i="",{epaisseur:e=.6,couleurDeRemplissage:a="blue",color:o="black",opaciteDeRemplissage:r=.3,unite:h=1,angle:n=0,hachures:u=!1}){super(),this.p=t===0?$(0,s):B([d(0,s-e/2),d(0,s+e/2),d(h*t,s+e/2),d(h*t,s-e/2)]),this.p instanceof I&&(this.p.couleurDeRemplissage=z(a),this.p.opaciteDeRemplissage=r,this.p.color=z(o),u&&(this.p.hachures=u)),this.texte=A(i,-.2,s,n,"black",1,"gauche")}tikz(){return this.p.tikz()+`
`+this.texte.tikz()}svg(t){return this.p.svg(t)+`
`+this.texte.svg(t)}}function Mt(p,t,s="",{epaisseur:i=.6,couleurDeRemplissage:e="blue",color:a="black",opaciteDeRemplissage:o=.3,unite:r=1,angle:h=0,hachures:n=!1}){return new dt(p,t,s,{epaisseur:i,couleurDeRemplissage:e,color:a,opaciteDeRemplissage:o,unite:r,angle:h,hachures:n})}class xt extends q{constructor(t,s,{reperageTraitPointille:i=!1,couleurDeRemplissage:e="blue",titreAxeVertical:a="",titre:o="",hauteurDiagramme:r=5,coeff:h=2,axeVertical:n=!1,etiquetteValeur:u=!0,labelAxeVert:f=!1}){super(),this.objets=[];for(let c=0;c<t.length;c++){const j=c*h,k=t[c]*r/L(t);if(this.objets.push(ft(j,k,s[c],{couleurDeRemplissage:e})),i){const g=at(-1,k,j,k);g.pointilles=5,g.epaisseur=.2,this.objets.push(g)}u&&t[c]!==0&&this.objets.push(P(ht(t[c]),d(j,k+.5)));const W=[1,2,5,10,20],O=[1,2,5,5,5];let b=1,m=1,T=1;for(;L(t)/m>5&&b<5;)b+=1,m=W[b-1],T=O[b-1];for(b===5&&(b=2);L(t)/m>5;)b=b+1,m=b*10,T=5;f&&this.objets.push(ct(0,L(t),m*r/Math.max(...t),"black",-3,Math.max(...t)/r)),n&&this.objets.push(ut(0,r+1,.2,m*r/Math.max(...t),.2,"black",T,a))}o!==""&&this.objets.push(P(o,d(-3,r+1),0,"black",1,"droite",!1,1)),this.bordures=[1e3,1e3,-1e3,-1e3];for(const c of this.objets)c.bordures!==void 0&&(this.bordures=[Math.min(this.bordures[0],c.bordures[0]),Math.min(this.bordures[1],c.bordures[1]),Math.max(this.bordures[2],c.bordures[2]),Math.max(this.bordures[3],c.bordures[3])])}svg(t){let s="";if(this.objets==null)return s;for(const i of this.objets)s+=`
	`+i.svg(t);return s}tikz(){let t="";if(this.objets==null)return t;for(const s of this.objets)t+=`
	`+s.tikz();return t}}function Dt(p,t,{reperageTraitPointille:s=!1,couleurDeRemplissage:i="blue",titreAxeVertical:e="",titre:a="",hauteurDiagramme:o=5,coeff:r=2,axeVertical:h=!1,etiquetteValeur:n=!0,labelAxeVert:u=!1}={}){return new xt(p,t,{reperageTraitPointille:s,couleurDeRemplissage:i,titreAxeVertical:e,titre:a,hauteurDiagramme:o,coeff:r,axeVertical:h,etiquetteValeur:n,labelAxeVert:u})}class mt extends q{x;y;constructor({effectifs:t=[],x:s=0,y:i=0,rayon:e=4,labels:a=[],semi:o=!1,legendeAffichage:r=!0,legendePosition:h="droite",mesures:n=[],visibles:u=[],pourcents:f=[],valeurs:c=[],hachures:j=[],remplissage:k=[]}={}){super(),this.objets=[];const O=it([0,1,3,4,5,6,7,8,9,10],t.length);this.bordures=[1e3,1e3,-1e3,-1e3],this.x=s,this.y=i;const b=d(this.x+e,this.y+(o?0:e)),m=d(this.x+2*e,o?this.y:this.y+e),T=o?Z(w(b,y(e,0)),b,180,!0,"white","black"):ot(b,e,"black");let g;switch(h){case"droite":g={x:this.x+2*e+1,y:this.y};break;case"dessus":g={x:this.x,y:this.y+(o?e+1:2*e+1)};break;case"dessous":default:g={x:this.x,y:this.y-1.5};break}let v=d(g.x,g.y);const tt=o?180:360,J=t.reduce((l,x)=>l+x,0),K=[],Q=[],S=[],U=[],V=[];let H=0,R=0;for(let l=0,x,M,D,G,C;l<t.length;l++){switch(M=tt*t[l]/J,x=Z(rt(m,b,H),b,M,!0),j[l]?(C=lt(O[l]),x.hachures=C,x.couleurDesHachures=z(F(l+1)),x.couleurDeRemplissage=z(F(l+2))):(C="",x.hachures=""),x.opaciteDeRemplissage=.7,k[l]&&(x.couleurDeRemplissage=z(F(l+1))),u[l]&&K.push(x),c[l]&&S.push(N(E(t[l]),Y(m,b,H+M*3/4,.8),"black",20,12,"yellow",8)),f[l]&&U.push(N(E(100*t[l]/J,0)+"\\%",Y(m,b,H+M/4,.8),"black",20,12,"yellow",8)),n[l]&&V.push(N(E(M,0)+"^\\circ",Y(m,b,H+M/2,.6),"black",20,12,"yellow",8)),H+=M,h){case"droite":D=_(w(v,y(0,1.5*l)),w(v,y(1,1.5*l)),"black"),G=P(a[l],w(v,y(1.2,l*1.5+.5)),0,"black",1.5,"gauche",!1),R=Math.max(R,a[l].length*.6);break;default:D=_(v,w(v,y(1,0)),"black"),G=P(a[l],w(v,y(1.2,.5)),0,"black",1.5,"gauche",!1),v=w(v,y(a[l].length*.6+1,0)),R=R+a[l].length*.6+2.2;break}D.couleurDeRemplissage=x.couleurDeRemplissage,D.couleurDesHachures=x.couleurDesHachures,D.hachures=C,D.opaciteDeRemplissage=.7,Q.push(D,G)}this.objets.push(T),this.objets.push(...K),r&&this.objets.push(...Q),this.objets.push(...S,...U,...V),this.bordures[0]=this.x-.5,this.bordures[1]=this.y-.5-(r&&h==="dessous"?2:0),this.bordures[2]=this.x+e*2+1+(r?h==="droite"?R:Math.max(R,this.x+e*2+1)-(this.x+e*2+1):0),this.bordures[3]=this.y+(o?e:e*2)+(r?h==="dessus"?2:h==="droite"?Math.max(this.y+(o?e:e*2),t.length*1.5)-(this.y+(o?e:e*2)):0:0)}svg(t){let s="";if(this.objets==null)return s;for(const i of this.objets)s+=`
	`+i.svg(t);return s}ttikz(){let t="";if(this.objets==null)return t;for(const s of this.objets)t+=`
	`+s.tikz();return t}}function wt({effectifs:p,x:t=0,y:s=0,rayon:i=4,labels:e=[],semi:a=!1,legendeAffichage:o=!0,legendePosition:r="droite",mesures:h=[],visibles:n=[],pourcents:u=[],valeurs:f=[],hachures:c=[],remplissage:j=[]}={}){return new mt({effectifs:p,x:t,y:s,rayon:i,labels:e,semi:a,legendeAffichage:o,legendePosition:r,mesures:h,visibles:n,pourcents:u,valeurs:f,hachures:c,remplissage:j})}export{zt as a,Dt as b,Mt as c,wt as d,ft as t};

import{h as T}from"./gestionInteractif-DujZpSu8.js";import{p as S}from"./qcm-BQR8Ns0N.js";import{a as $}from"./questionMathLive-DdRvWqlN.js";import{bA as c,g as a,br as x,F as R}from"./embellissements-BYV7mIDn.js";import w from"decimal.js";import k from"seedrandom";import{a as D,b as j,u as F}from"./tableauMathlive-xx-nDjq0.js";import{E as g}from"./Exercice-DtXhjCyI.js";import"./comparisonFunctions-B45ZZ3C7.js";import"./compute-engine.min.umd-BwAhpA7x.js";import"./index-BUDQz6-w.js";import"mathjs";import"./Hms-u2AUyU1C.js";import"./ListeDeroulanteElement-CXmzV-cr.js";import"./exerciseMethods-CtbYPwln.js";import"katex";import"crypto-js";import"./AjouteTableauMathlive-Bz24QHd3.js";import"earcut";import"roughjs";import"./canStore-DaSrd7sp.js";import"./generalStore-C3E9FHtR.js";import"./sizeTools-DfTC1Dgv.js";import"./time-DMC-jnVL.js";const rs="Choix aléatoires des questions",us=!0,ms="mathLive",ps=!1,hs="315b6",fs={"fr-fr":["can6a-Aléa"],"fr-ch":["NR"]},b=function(Q){};class cs extends g{seed;constructor(){super(),this.besoinFormulaireTexte=["Type de questions",[`Nombres séparés
 par des tirets :`,"All : Mélange","C1 à C47 : can de 6C01 à 6C47","G1 à G7 : can de 6G01 à 6G07","M1 à M7 : can de 6M01 à 6M13","N1 à N17 : can de 6N01 à 6N17","C : Mélange calcul","G : Mélange géométrie","M : Mélange mesure","N : Mélange numération"].join(`
`)],this.nbQuestions=4,this.sup="All",this.lastCallback="",this.seed=D(),this.nouvelleVersionWrapper=function(){this.nouvelleVersion()}}nouvelleVersion(){if(this.questionJamaisPosee(0,this.seed,this.sup,this.sup2,this.sup3,String(this.interactif),this.nbQuestions),this.lastCallback===this.listeArguments[0])return;this.lastCallback=this.listeArguments[0],this.sup===null||this.sup===""?this.sup="All":this.sup=this.sup.toString(),b(this.sup);const A=this.sup.replaceAll("C","");let m=c(a({saisie:A,min:0,max:47,defaut:0,melange:48,nbQuestions:0,shuffle:!1,exclus:[37,0]}),0);m.length===0&&(this.sup.includes("C")||this.sup.includes("All"))&&(m=a({saisie:48,min:1,max:47,defaut:1,melange:48,nbQuestions:this.nbQuestions,shuffle:!0,exclus:[37]}));const E=this.sup.replaceAll("G","");let p=c(a({saisie:E,min:0,max:7,defaut:0,melange:8,nbQuestions:0,shuffle:!1}),0);p.length===0&&(this.sup.includes("G")||this.sup.includes("All"))&&(p=a({saisie:8,min:1,max:7,defaut:1,melange:8,nbQuestions:this.nbQuestions,shuffle:!0}));const q=this.sup.replaceAll("N","");let h=c(a({saisie:q,min:0,max:17,defaut:0,melange:18,nbQuestions:0,shuffle:!1}),0);h.length===0&&(this.sup.includes("N")||this.sup.includes("All"))&&(h=a({saisie:18,min:1,max:17,defaut:1,melange:18,nbQuestions:this.nbQuestions,shuffle:!0}));const M=this.sup.replaceAll("M","");let f=c(a({saisie:M,min:0,max:13,defaut:0,melange:14,nbQuestions:0,shuffle:!1}),0);f.length===0&&(this.sup.includes("M")||this.sup.includes("All"))&&(f=a({saisie:14,min:1,max:13,defaut:1,melange:14,nbQuestions:this.nbQuestions,shuffle:!0}));function y(...s){const n=[];let l=0;for(let o=0;o<s.length;o++)l=Math.max(s[o].length,l);for(let o=0;o<l;o++)for(let i=0;i<s.length;i++){const r=s[i].shift();r&&n.push(r)}return n}m.length===0&&p.length===0&&h.length===0&&f.length===0&&(m[0]="1",p[0]="1",h[0]="1",f[0]="1");const v=y(Array.from(m,s=>"C"+String(s).padStart(2,"0")),Array.from(p,s=>"G"+String(s).padStart(2,"0")),Array.from(h,s=>"N"+String(s).padStart(2,"0")),Array.from(f,s=>"M"+String(s).padStart(2,"0"))),d=x(v,this.nbQuestions).slice(0,this.nbQuestions);b(d.join(`
`));async function N(s,n){const l=[];for(let i=0;i<n.length;i++)i===0?await C(s,`can6${n[i]}`,i):l.push(C(s,`can6${n[i]}`,i));await Promise.all(l);const o=new window.Event("updateAsyncEx",{bubbles:!0});document.dispatchEvent(o)}function G(s){return(Object.entries(F).find(o=>{const[i,,]=o[1].replaceAll("\\","/").split("/").reverse();return i.split(".")[0]===s})??[])[0]}async function C(s,n,l){const o=G(n)??"";return j(o).then(r=>{const t=r;s.interactif?t.interactif=!0:t.interactif=!1,t.numeroExercice=s.numeroExercice,t.seed=s.seed,k(t.seed,{global:!0}),t.nouvelleVersion();const e=l;if(t.listeQuestions.length===0){s.listeCorrections[e]=t.correction,s.listeCanEnonces[e]=t.canEnonce,s.listeCanReponsesACompleter[e]=t.canReponseACompleter;let u;!(t.reponse instanceof R)&&!(t.reponse instanceof w)&&typeof t.reponse=="object"?u=t.reponse:u={reponse:{value:t.reponse,options:t.optionsDeComparaison??{}}},T(s,e,u,{formatInteractif:t.formatInteractif??"mathlive"}),s.listeQuestions[e]=t.question+$(s,e,t.formatChampTexte||"",t.optionsChampTexte||{})}else if(s.listeQuestions[e]=t.listeQuestions[0],s.listeCorrections[e]=t.listeCorrections[0],s.listeCanEnonces[e]=t.listeCanEnonces[0],s.listeCanReponsesACompleter[e]=t.listeCanReponsesACompleter[0],s.autoCorrection[e]=t.autoCorrection[0],t?.autoCorrection[0]?.propositions===void 0)s.listeQuestions[e]=s.listeQuestions[e].replaceAll(`champTexteEx${s.numeroExercice}Q0`,`champTexteEx${s.numeroExercice}Q${e}`),s.listeQuestions[e]=s.listeQuestions[e].replaceAll(`resultatCheckEx${s.numeroExercice}Q0`,`resultatCheckEx${s.numeroExercice}Q${e}`);else{const u=S(s,e);s.listeCanReponsesACompleter[e]=u.texte,s.listeQuestions[e]=s.autoCorrection[e].enonce+u.texte}}).catch(function(r){s instanceof g?s.listeQuestions[l]="Erreur de chargement:"+n:window.notify("Erreur de chargement:"+n,{error:r})})}N(this,d);for(let s=0,n=0;s<this.nbQuestions&&n<50;n++)this.listeCorrections[s]="",this.listeCanEnonces[s]="",this.listeCanReponsesACompleter[s]="",this.listeQuestions[s]="chargement...",s++}}export{ps as amcReady,cs as default,us as interactifReady,ms as interactifType,fs as refs,rs as titre,hs as uuid};

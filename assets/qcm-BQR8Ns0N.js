import{an as c,a8 as g,t as E,dE as y,m as v}from"./embellissements-BYV7mIDn.js";function k(t,o){const n=t.map(e=>JSON.parse(JSON.stringify(e))),r=Array.from({length:t.length},(e,a)=>a);for(let e=o;e>0;e--){const a=Math.floor(Math.random()*(e+1));[n[e],n[a]]=[n[a],n[e]],[r[e],r[a]]=[r[a],r[e]]}return{shuffledArray:n,indexes:r}}function q(t){const o=[];if(t.autoCorrection.length!==t.listeQuestions.length)return[];for(let n=0;n<t.autoCorrection.length;n++){const r=t.autoCorrection[n].propositions;if(r==null||r.length>4)continue;const e=t.consigne.replaceAll(/\$([^$]*)\$/g,'<span class="math-tex">$1</span>')??"",a=t.introduction.replaceAll(/\$([^$]*)\$/g,'<span class="math-tex">$1</span>')??"",h=t.listeQuestions[n].split('<div class="my-3">')[0].replaceAll(/\$([^$]*)\$/g,'<span class="math-tex">$1</span>');let d;t.autoCorrection[n].enonce!=null&&t.autoCorrection[n].enonce!==""?d=`${n===0||!e.startsWith("Parmi les")?e:""}${n===0&&e!==""?"<br>":""}
        ${a??""}
          ${a!=null&&a!==""?"<br>":""}
            ${t.autoCorrection[n].enonce!=null?t.autoCorrection[n].enonce?.replaceAll(/&nbsp;/g," ").replaceAll(/\$([^$]*)\$/g,'<span class="math-tex">$1</span>'):""}`:d=`${n===0?e:""}${n===0&&e!==""?"<br>":""}
       ${a??""}
         ${a!=null&&a!==""?"<br>":""}
           ${h.replaceAll(/&nbsp;/g," ")}`;const u=r.map(i=>i.texte),b=r.map(i=>i.statut);let m=`<h3 data-translate="{&quot;html&quot;:&quot;questions.defaultquestion&quot;}">${d?.replaceAll(/\$([^$]*)\$/g,'<span class="math-tex">$1</span>')}</h3><ol>`,l="";for(let i=0;i<u.length;i++){const $=u[i].replaceAll(/\$([^$]*)\$/g,'<span class="math-tex">$1</span>'),f=b[i];m+=`<li${f?' class="rondvert"':""}>${$}</li>`,f&&(l=c(i+1))}m+="</ol>",o.push({question:m,reponse:l})}return o}function x(t,o,n={style:"",format:"case"}){const r=[];let e="",a="",C="",h=1,d=!1;const u=n?.style!=null&&n.style!==""?`class="ml-2" style="${n.style};" `:'class="ml-2"';if(t?.autoCorrection[o]?.propositions===void 0)return window.notify("propositionsQcm a reçu une liste de propositions undefined",{autoCrorrection:t?.autoCorrection[o],propositions:t?.autoCorrection[o].propositions}),{texte:"",texteCorr:""};if(t.autoCorrection[o].propositions.length===0)return window.notify("propositionsQcm a reçu une liste de propositions vide",{autoCrorrection:t.autoCorrection[o],propositions:t.autoCorrection[o].propositions}),{texte:"",texteCorr:""};if(t.autoCorrection[o].propositions.length===1)return window.notify("propositionsQcm a reçu une liste de propositions de taille 1",{autoCrorrection:t.autoCorrection[o],propositions:t.autoCorrection[o].propositions}),{texte:"",texteCorr:""};Q(t.autoCorrection[o].propositions),C="&emsp;",t?.autoCorrection[o].reponse==null&&(t.autoCorrection[o].reponse={}),t.autoCorrection[o].reponse.param==null&&(t.autoCorrection[o].reponse.param={}),t.autoCorrection[o].reponse.param.formatInteractif="qcm";const b=Math.min(t.autoCorrection[o].options?.lastChoice??t.autoCorrection[o].propositions.length,t.autoCorrection[o].propositions.length-1);d=t.autoCorrection[o].options?.vertical??!1,h=Math.min(t.autoCorrection[o].options?.nbCols??1,1);const m=t.autoCorrection[o].propositions.some(l=>l.texte==="Vrai")&&t.autoCorrection[o].propositions.some(l=>l.texte==="Faux");if(m){const l=t.autoCorrection[o].propositions.findIndex($=>$.texte==="Vrai"),i=t.autoCorrection[o].propositions.findIndex($=>$.texte==="Faux");if(l!==-1&&i!==-1){const $=t.autoCorrection[o].propositions[l],f=t.autoCorrection[o].propositions[i];t.autoCorrection[o].propositions.splice(l,1),t.autoCorrection[o].propositions.splice(i-1,1),t.autoCorrection[o].propositions.unshift(f),t.autoCorrection[o].propositions.unshift($)}}if(!t.autoCorrection[o].options?.ordered&&!m){const l=k(t.autoCorrection[o].propositions,b);t.autoCorrection[o].propositions=l.shuffledArray,r.push(...l.indexes)}{const l=t.autoCorrection[o].options?.radio??!1,i=(s,p)=>s==null||s==="case"?`<input type="${l?"radio":"checkbox"}" name="checkEx${t.numeroExercice}Q${o}" ${t.interactif?"":"disabled"} tabindex="0" style="height: 1rem; width: 1rem;" class="disabled:cursor-default" id="checkEx${t.numeroExercice}Q${o}R${p}">`:s==="lettre"?`<label ${u} >${g(c(p+1))}.</label>`:`<input type="${l?"radio":"checkbox"}" name="checkEx${t.numeroExercice}Q${o}" ${t.interactif?"":"disabled"} tabindex="0" style="height: 1rem; width: 1rem;" class="disabled:cursor-default" id="checkEx${t.numeroExercice}Q${o}R${p}"><label ${u} >${c(p+1)}.</label>`,$=(s,p)=>s==null||s==="case"?`<input type="${l?"radio":"checkbox"}" name="checkEx${t.numeroExercice}Q${o}" tabindex="0" style="height: 1rem; width: 1rem;" class="disabled:cursor-default" checked>`:s==="lettre"?`<label ${u} >${E(c(p+1))}.</label>`:`<input type="${l?"radio":"checkbox"}" name="checkEx${t.numeroExercice}Q${o}" ${t.interactif?"":"disabled"} tabindex="0" style="height: 1rem; width: 1rem;" class="disabled:cursor-default" checked><label ${u} >${E(c(p+1))}.</label>`,f=(s,p)=>s==null||s==="case"?`<input type="${l?"radio":"checkbox"}" name="checkEx${t.numeroExercice}Q${o}" tabindex="0" style="height: 1rem; width: 1rem;" class="disabled:cursor-default">`:s==="lettre"?`<label ${u} >${g(`${y(c(p+1))}`)}.</label>`:`<input type="${l?"radio":"checkbox"}" name="checkEx${t.numeroExercice}Q${o}" ${t.interactif?"":"disabled"} tabindex="0" style="height: 1rem; width: 1rem;" class="disabled:cursor-default"><label ${u} >$${v(`\\cancel{${c(p+1)}}`,"black")}$.</label>`;e='<div class="my-3">',a='<div class="my-3">';for(let s=0;s<t.autoCorrection[o].propositions.length;s++)h>1&&s%h===0&&(e+="<br>"),e+=`<div class="ex${t.numeroExercice} ${d?"":"inline-block"} my-2 align-center">
      ${i(n?.format,s)}
      <label id="labelEx${t.numeroExercice}Q${o}R${s}" ${u} >${t.autoCorrection[o].propositions[s].texte+C}</label>
      <div id="feedbackEx${t.numeroExercice}Q${o}R${s}" ${d?"":'class="inline"'}></div></div>`,a+=`<div class="${d?"":"inline-block"}">
    ${t.autoCorrection[o].propositions[s].statut?$(n?.format,s):f(n?.format,s)}
      <label id="labelEx${t.numeroExercice}Q${o}R${s}" ${u} >${t.autoCorrection[o].propositions[s].texte+C}</label>
      </div>`;e+=`</div><div class="m-2" id="resultatCheckEx${t.numeroExercice}Q${o}"></div>`,a+='</div><div class="m-2"></div>'}return{texte:e,texteCorr:a,indexes:r}}function Q(t){let o=!1;for(let n=0;n<t.length-1;n++)for(let r=n+1;r<t.length;)t[n].texte===t[r].texte?(o=!0,t[n].statut?t.splice(r,1):t[r].statut?(t.splice(r,1),t[n].statut=!0):t.splice(r,1)):r++;return o}export{x as p,q};

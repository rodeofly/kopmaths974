import{c as p,s as k}from"./embellissements-BYV7mIDn.js";import"./tableauMathlive-xx-nDjq0.js";import{b as y}from"./Exercice-DtXhjCyI.js";import{h as E}from"./gestionInteractif-DujZpSu8.js";import{A as T,a as w}from"./AjouteTableauMathlive-Bz24QHd3.js";const h=(e="")=>y(e).join(" ");function D({exercice:e,question:a,objetReponse:o,reponseParams:t,typeInteractivite:l,content:n="",classe:i="",tableau:r,typeTableau:d="doubleEntree",texteAvant:u="",texteApres:s="",blocCenter:f=!1,espace:c=!1}){if(e.interactif){if(!(l==="mathlive"||l==="fillInTheBlank"||l==="tableauMathlive"||l==="texte"))return window.notify(`Type d'interactivité ${l} non reconnu. Exercice ${e.id} ${e.uuid}`,{typeInteractivite:l}),"";switch(t===void 0&&(t={formatInteractif:"mathlive"}),E(e,a,o,t),l){case"fillInTheBlank":return B(e,a,n,i,"\\ldots");case"tableauMathlive":return r?(d==="doubleEntree"?T.create(e.numeroExercice??0,a,r,i,!0,{texteAvant:u,texteApres:s,blocCenter:f?" bloccenter":"",espace:c?" ":""}):w.create(e.numeroExercice??0,a,r,i,!0,{texteAvant:u,texteApres:s,blocCenter:f?" bloccenter":"",espace:c?" ":""})).output:(window.notify(`Tableau non défini pour l'interactivité tableauMathlive. Exercice ${e.id} ${e.uuid}`,{typeInteractivite:l}),"");case"texte":return x(e,a,i,{texteAvant:u,texteApres:s,blocCenter:f,espace:c});default:return v(e,a,i,{texteAvant:u,texteApres:s,blocCenter:f,espace:c})}}return""}function $(e,a,o='style="display: none"'){const t=e.numeroExercice;return e==null||typeof t!="number"||typeof a!="number"?"":`<div class ="ml-2 py-2 italic text-coopmaths-warn-darkest dark:text-coopmathsdark-warn-darkest" id="feedbackEx${t}Q${a}" ${o!==""?o:""}></div>`}function x(e,a,o="",t={}){return b({type:"texte",exercice:e,i:a,style:o},t)}function v(e,a,o="",t={}){return b({type:"mathlive",exercice:e,i:a,style:o},t)}function b(e,a={}){const{type:o,exercice:t,i:l,style:n=""}=e;let{texteAvant:i="",texteApres:r="",blocCenter:d=!1,espace:u=!1,placeholder:s=""}=a;if(r!==""&&(r=k()+r),!t.interactif||n==="none")return"";typeof n!="string"&&window.notify(`style doit être une chaîne de caractères. Exercice ${t.id} ${t.uuid}`,{style:n}),n.includes("blocCenter")&&(d=!0);const f=h(typeof n=="string"?n:""),c=o==="mathlive"?"math-field":"input";let m=`<label>${i}</label><${c} data-keyboard="${f}" ${u?'data-space="true"':""} ${s?`placeholder="${s}"`:""} virtual-keyboard-mode=manual class="${n}" id="champTexteEx${t.numeroExercice}Q${l}"></${c}>${r?`<span>${r}</span>`:""} <span id="resultatCheckEx${t.numeroExercice}Q${l}"></span>`;return d&&(m=`<div style='display: flex;justify-content: center; margin:5px;'>${m}<div>`),m+=$(t,l),m}function B(e,a,o,t="",l="\\ldots"){let n="",i=o;for(;i;){const r=/^(.*?)%\{([^}]+)}(.*?)$/.exec(i);if(r){const[,d,u,s]=r,f=u;if(f==null)throw Error(`Définition de ${f} manquante`);n+=d,e.interactif?n+=`\\placeholder[${f}]{}`:n+=l,i=s??""}else n+=i,i=""}if(e.interactif&&p.isHtml){const r=h(t);let d="";return t!==""?t==="fillInTheBlank"||t==="fillInTheBlanks"?d="fillInTheBlanks":d=["fillInTheBlanks",...t.split(" ").filter(u=>u!=="fillInTheBlank"&&u!=="fillInTheBlanks")].join(" "):d="fillInTheBlanks",`<math-field data-keyboard="${r}" virtual-keyboard-mode=manual readonly class="${d}" id="champTexteEx${e.numeroExercice}Q${a}">${n}</math-field><span id="resultatCheckEx${e.numeroExercice}Q${a}"></span>${$(e,a)}`}return n===""?"":`$${n}$`}export{v as a,x as b,D as c,$ as d,B as r};

import{O as V,r as g,ct as x,bN as l,k as N}from"./embellissements-BYV7mIDn.js";import{t as O,e as j,d as p,O as G}from"./2dLutin-DLeyGTRS.js";const y=[["Blanc","Blanc","Blanc","Blanc","Blanc","Blanc","Blanc","Blanc","Blanc","Blanc","Blanc","Blanc","Blanc","Blanc","Blanc","Blanc"],["Blanc","Noir","Jaune","Bleu","Vert","Orange","Rouge","Orange","Noir","Jaune","Gris","Vert","Rose","Noir","Jaune","Blanc"],["Blanc","Rouge","Bleu","Orange","Jaune","Rose","Gris","Jaune","Rose","Gris","Jaune","Bleu","Rouge","Gris","Rouge","Blanc"],["Blanc","Rose","Vert","Gris","Rouge","Noir","Bleu","Vert","Noir","Vert","Bleu","Rose","Gris","Vert","Orange","Blanc"],["Blanc","Vert","Bleu","Rose","Vert","Bleu","Orange","Gris","Rouge","Orange","Jaune","Gris","Rouge","Rose","Bleu","Blanc"],["Blanc","Noir","Orange","Rouge","Orange","Jaune","Rouge","Blanc","Blanc","Noir","Gris","Orange","Noir","Jaune","Rose","Blanc"],["Blanc","Rose","Gris","Noir","Bleu","Vert","Bleu","Blanc","Blanc","Rouge","Bleu","Gris","Vert","Rouge","Noir","Blanc"],["Blanc","Noir","Rouge","Rose","Vert","Orange","Rose","Noir","Orange","Vert","Jaune","Rose","Noir","Rose","Vert","Blanc"],["Blanc","Orange","Gris","Rouge","Jaune","Noir","Vert","Rouge","Rose","Noir","Bleu","Vert","Jaune","Orange","Gris","Blanc"],["Blanc","Bleu","Jaune","Orange","Vert","Gris","Jaune","Gris","Orange","Gris","Rose","Bleu","Rouge","Bleu","Orange","Blanc"],["Blanc","Rose","Bleu","Jaune","Rose","Orange","Rouge","Bleu","Noir","Jaune","Gris","Vert","Jaune","Noir","Rouge","Blanc"],["Blanc","Blanc","Blanc","Blanc","Blanc","Blanc","Blanc","Blanc","Blanc","Blanc","Blanc","Blanc","Blanc","Blanc","Blanc","Blanc"]];function T(c,t,o){let s=!1,e;const a=L({x:0,y:0,orientation:0,plateau:o.plateauNLC,relatif:o.relatif,nx:o.nx,ny:o.ny,pas:o.pas});a.currentPos.x=o.currentPos.x,a.currentPos.y=o.currentPos.y,a.currentOrientation=o.currentOrientation;for(let r=0;r<c;r++)if(e=M(t,a),e[0])a.currentPos.x=e[1],a.currentPos.y=e[2],a.currentOrientation=e[3];else{s=!0;break}return[!s,a.currentPos.x,a.currentPos.y,a.currentOrientation]}function J(c,t,o){const s=function(B,h,d,f){switch(f){case 0:case 360:d+=B;break;case 90:case-270:h+=B;break;case 180:case-180:d-=B;break;case 270:case-90:h-=B;break}return[h,d]};let e=o.currentPos.x,a=o.currentPos.y,r=o.currentOrientation,i;switch(c){case"AV20":[e,a]=s(20,e,a,r),i="\\blockmove{avancer de \\ovalnum{20} pas}",t!==void 0&&p(20,t);break;case"AV30":[e,a]=s(30,e,a,r),i="\\blockmove{avancer de \\ovalnum{30} pas}",t!==void 0&&p(30,t);break;case"AV40":[e,a]=s(40,e,a,r),i="\\blockmove{avancer de \\ovalnum{40} pas}",t!==void 0&&p(40,t);break;case"AV60":[e,a]=s(60,e,a,r),i="\\blockmove{avancer de \\ovalnum{60} pas}",t!==void 0&&p(60,t);break;case"AV80":[e,a]=s(80,e,a,r),i="\\blockmove{avancer de \\ovalnum{80} pas}",t!==void 0&&p(80,t);break;case"AV90":[e,a]=s(90,e,a,r),i="\\blockmove{avancer de \\ovalnum{90} pas}",t!==void 0&&p(90,t);break;case"AV100":[e,a]=s(100,e,a,r),i="\\blockmove{avancer de \\ovalnum{100} pas}",t!==void 0&&p(100,t);break;case"AV120":[e,a]=s(120,e,a,r),i="\\blockmove{avancer de \\ovalnum{120} pas}",t!==void 0&&p(120,t);break;case"AV150":[e,a]=s(150,e,a,r),i="\\blockmove{avancer de \\ovalnum{150} pas}",t!==void 0&&p(150,t);break;case"TD90":r===180?r=-90:r+=90,i="\\blockmove{tourner \\turnright{} de \\ovalnum{90} degrés}",t!==void 0&&O(90,t);break;case"TG90":r===-90?r=180:r-=90,i="\\blockmove{tourner \\turnleft{} de \\ovalnum{90} degrés}",t!==void 0&&j(90,t);break;case"TD180":case"TG180":r===0?r=180:r===-90?r=90:r===90?r=-90:r=0,i="\\blockmove{tourner \\turnright{} de \\ovalnum{180} degrés}",t!==void 0&&O(180,t);break;case"NLC":default:i="\\blocklist{Note la couleur}";break}return o.testCoords(e,a)?[!0,e,a,r,i,t]:[!1,o.currentPos.x,o.currentPos.y,o.currentOrientation,i,t]}function M(c,t){let o=!1,s;const e=L({x:0,y:0,orientation:0,plateau:t.plateauNLC,relatif:t.relatif,nx:t.nx,ny:t.ny,pas:t.pas});e.currentPos.x=t.currentPos.x,e.currentPos.y=t.currentPos.y,e.currentOrientation=t.currentOrientation;for(let a=0;a<c.length;a++)if(s=J(c[a],e.objetLutin,e),s[0])e.currentPos.x=s[1],e.currentPos.y=s[2],e.currentOrientation=s[3];else{o=!0;break}return[!o,e.currentPos.x,e.currentPos.y,e.currentOrientation]}function R(c){switch(c){case"Blanc":return"white";case"Bleu":return"DodgerBlue";case"Noir":return"black";case"Rouge":return"red";case"Jaune":return"yellow";case"Rose":return"HotPink";case"Vert":return"green";case"Orange":return"DarkOrange";case"Gris":return"gray"}}function P(c){switch(c){case"Blanc":return"0";case"Bleu":return"3";case"Noir":return"1";case"Rouge":return"2";case"Jaune":return"6";case"Rose":return"5";case"Vert":return"7";case"Orange":return"4";case"Gris":return"8"}}class w{objetLutin;plateauNLC;currentPos;currentOrientation;codeScratch;currentIndex;relatif;pas;nx;ny;constructor({x:t=15,y:o=15,orientation:s=90,relatif:e=!0,nx:a=16,ny:r=12,pas:i=30,plateau:B=y}){this.plateauNLC=B,this.currentPos={x:t,y:o},this.currentOrientation=s,this.codeScratch="",this.currentIndex=0,this.relatif=e,this.pas=i,this.nx=a,this.ny=r,this.objetLutin=new G,this.objetLutin.x=t,this.objetLutin.y=o,this.objetLutin.orientation=s}nlc(){return this.plateauNLC[Math.ceil(((this.relatif?(this.ny-1)*this.pas>>1:(this.ny-1)*this.pas)-this.currentPos.y)/this.pas)][Math.ceil(((this.relatif?(this.nx-1)*this.pas>>1:-this.pas>>1)+this.currentPos.x)/this.pas)]}testCoords(t,o){return!(t<(this.relatif?(1-this.nx)*this.pas>>1:this.pas>>1)||t>(this.relatif?this.nx*this.pas>>1:(this.nx-.5)*this.pas)||o<(this.relatif?(1-this.ny)*this.pas>>1:this.pas>>1)||o>(this.relatif?this.ny*this.pas>>1:(this.ny-.5)*this.pas))}}function L({x:c=15,y:t=15,orientation:o=90,plateau:s=y,relatif:e=!0,nx:a=16,ny:r=12,pas:i=30}={}){return new w({x:c,y:t,orientation:o,relatif:e,plateau:s,nx:a,ny:r,pas:i})}class C extends V{relatif;pas;type;scale;nx;ny;plateauNLC;constructor({type:t=1,melange:o=!1,scale:s=.5,relatif:e=!0,pas:a=30,nx:r=16,ny:i=12,plateau:B=y}={}){if(super(),this.relatif=e,this.pas=a,this.type=1,this.scale=s,this.nx=r,this.ny=i,this.plateauNLC=B,this.objets=[],o)for(let u=0,n,b,k,v,m;u<20;u++)k=g(1,this.ny-2),v=g(1,this.ny-2,k),n=g(1,this.nx-2),b=g(1,this.nx-2),m=this.plateauNLC[k][n],this.plateauNLC[k][n]=this.plateauNLC[v][b],this.plateauNLC[v][b]=m;this.objets=[];let h;for(let u=0;u<this.nx;u++)for(let n=0;n<this.ny;n++){switch(t){case 1:h=new x({xMin:u*1.5+(r>>1)*(e?-1.5:0),yMin:n*1.5+(i>>1)*(e?-1.5:0),xMax:(u+1)*1.5+(r>>1)*(e?-1.5:0),yMax:(n+1)*1.5+(i>>1)*(e?-1.5:0)}).addColor({color:"black",opacity:.8,backgroudOpacity:.7,colorBackground:R(this.plateauNLC[i-1-n][u])});break;case 2:h=new x({xMin:u*1.5+(r>>1)*(e?-1.5:0),yMin:n*1.5+(i>>1)*(e?-1.5:0),xMax:(u+1)*1.5+(r>>1)*(e?-1.5:0),yMax:(n+1)*1.5+(i>>1)*(e?-1.5:0)}).addColor({color:"black",opacity:.8,backgroudOpacity:.7,colorBackground:R(this.plateauNLC[i-1-n][u])}).addTextIn({size:1.2,textIn:P(this.plateauNLC[i-1-n][u]),color:"black",opacity:.8});break;case 3:h=new x({xMin:u*1.5+(r>>1)*(e?-1.5:0),yMin:n*1.5+(i>>1)*(e?-1.5:0),xMax:(u+1)*1.5+(r>>1)*(e?-1.5:0),yMax:(n+1)*1.5+(i>>1)*(e?-1.5:0)}).addColor({color:"black",opacity:.8,backgroudOpacity:1,colorBackground:"white"}).addTextIn({color:"black",opacity:.9,textIn:this.plateauNLC[i-1-n][u],size:.9});break;case 4:default:h=new x({xMin:u*1.5+(r>>1)*(e?-1.5:0),yMin:n*1.5+(i>>1)*(e?-1.5:0),xMax:(u+1)*1.5+(r>>1)*(e?-1.5:0),yMax:(n+1)*1.5+(i>>1)*(e?-1.5:0)}).addColor({color:"black",backgroudOpacity:1,colorBackground:"white",opacity:.8}).addTextIn({size:1.2,color:"black",opacity:.9,textIn:P(this.plateauNLC[i-1-n][u])});break}const b=h.render();this.objets.push(...Array.isArray(b)?b:[b])}this.relatif&&this.objets.push(l(`-${this.pas}`,-1.6,-.4,0,"black",1.2,"milieu",!0,s)),this.objets.push(l(`${this.pas}`,1.5,-.4,0,"black",1.2,"milieu",!0,s)),this.objets.push(l("0",-.3,-.4,0,"black",1.2,"milieu",!0,s)),this.relatif&&this.objets.push(l(`-${this.pas}`,-.5,-1.5,0,"black",1.2,"milieu",!0,s)),this.objets.push(l(`${this.pas}`,-.5,1.5,0,"black",1.2,"milieu",!0,s)),this.objets.push(l("x",this.nx*(this.relatif?.75:1.5)+.7,(this.relatif,-.6),0,"purple",1.2,"milieu",!0,s)),this.objets.push(l("y",-.4,this.ny*(this.relatif?.75:1.5)+.7,0,"purple",1.2,"milieu",!0,s)),this.relatif&&(this.objets.push(l("+",(this.nx>>1)*1.5+.8,0,0,"purple",1.2,"milieu",!0,s)),this.objets.push(l("-",-(this.nx>>1)*1.5-.5,.2,0,"purple",1.2,"milieu",!0,s)),this.objets.push(l("+",0,(this.ny>>1)*1.5+.8,0,"purple",1.2,"milieu",!0,s)),this.objets.push(l("-",0,-(this.ny>>1)*1.5-.5,0,"purple",1.2,"milieu",!0,s)));const d=N(0,(this.ny>>1)*(this.relatif?-1.5:0),0,(this.ny>>1)*(this.relatif?1.5:3)+.5,"purple");d.styleExtremites="->";const f=N((this.nx>>1)*(this.relatif?-1.5:0),0,(this.nx>>1)*(this.relatif?1.5:3)+.5,0,"purple");f.styleExtremites="->",this.objets.push(d),this.objets.push(f)}}function D({type:c=1,melange:t=!1,scale:o=.5,relatif:s=!0,pas:e=30,nx:a=16,ny:r=12,plateau:i}={}){return i!==void 0?new C({type:c,melange:t,scale:o,relatif:s,pas:e,nx:a,ny:r,plateau:i}):new C({type:c,melange:t,scale:o,relatif:s,pas:e,nx:a,ny:r})}export{C as P,J as a,M as b,P as c,R as d,y as e,L as n,D as p,T as t};
